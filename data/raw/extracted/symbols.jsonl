{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/ShoppingApplicationBeckendApplication.java:com.example.shoppingapplicationbeckend.ShoppingApplicationBeckendApplication.main:10","symbol_type":"method","name":"main","qualified_name":"com.example.shoppingapplicationbeckend.ShoppingApplicationBeckendApplication.main","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/ShoppingApplicationBeckendApplication.java","start_line":10,"end_line":12,"source":"public static void main(String[] args) {\n        SpringApplication.run(ShoppingApplicationBeckendApplication.class, args);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ShoppingApplicationBeckendApplication","method_name":"main","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"0e0d5b8da7471e907d04e531d06b64dea69fb1362d2e9cb5fd733118288b7bd0","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java:com.example.shoppingapplicationbeckend.config.HibernateConfig.HibernateConfig:22","symbol_type":"method","name":"HibernateConfig","qualified_name":"com.example.shoppingapplicationbeckend.config.HibernateConfig.HibernateConfig","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java","start_line":22,"end_line":25,"source":"@Autowired\n    public HibernateConfig(HibernateProperty hibernateProperty) {\n        this.hibernateProperty = hibernateProperty;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"HibernateConfig","method_name":"HibernateConfig","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"06ee74ee69f11044f311e34c75d3e8d10b6e4674e18a774c63d10a9e8734aa41","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java:com.example.shoppingapplicationbeckend.config.HibernateConfig.hibernateProperties:27","symbol_type":"method","name":"hibernateProperties","qualified_name":"com.example.shoppingapplicationbeckend.config.HibernateConfig.hibernateProperties","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java","start_line":27,"end_line":34,"source":"private Properties hibernateProperties() {\n        Properties hibernateProperties = new Properties();\n        hibernateProperties.setProperty(\"hibernate.show_sql\", hibernateProperty.getShowsql());\n        hibernateProperties.setProperty(\"hibernate.dialect\", hibernateProperty.getDialect());\n        hibernateProperties.setProperty(\"hibernate.hbm2ddl.auto\", \"update\"); // Auto-update schema (not for production)\n\n        return hibernateProperties;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"HibernateConfig","method_name":"hibernateProperties","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"4c49be950b8e4ca8262033cdc068786cf163fb8dc11630b3b8e777a4b68651ed","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java:com.example.shoppingapplicationbeckend.config.HibernateConfig.dataSource:36","symbol_type":"method","name":"dataSource","qualified_name":"com.example.shoppingapplicationbeckend.config.HibernateConfig.dataSource","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java","start_line":36,"end_line":45,"source":"@Bean\n    public DataSource dataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(hibernateProperty.getDriver());\n        dataSource.setUrl(hibernateProperty.getUrl());\n        dataSource.setUsername(hibernateProperty.getUsername());\n        dataSource.setPassword(hibernateProperty.getPassword());\n\n        return dataSource;\n    }","doc":null,"annotations":[{"name":"Bean","arguments":null,"raw_text":"@Bean"}],"metadata":{"class_name":"HibernateConfig","method_name":"dataSource","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"d99ca77441d0023e5b9dc9810c65bd0586ffbb434ce10e5839d36eed9d58fbd9","line_count":10}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java:com.example.shoppingapplicationbeckend.config.HibernateConfig.sessionFactory:47","symbol_type":"method","name":"sessionFactory","qualified_name":"com.example.shoppingapplicationbeckend.config.HibernateConfig.sessionFactory","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java","start_line":47,"end_line":55,"source":"@Bean\n    protected LocalSessionFactoryBean sessionFactory() {\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\n        sessionFactory.setDataSource(dataSource());\n        sessionFactory.setPackagesToScan(\"com.example.shoppingapplicationbeckend.model\");\n        sessionFactory.setHibernateProperties(hibernateProperties());\n\n        return sessionFactory;\n    }","doc":null,"annotations":[{"name":"Bean","arguments":null,"raw_text":"@Bean"}],"metadata":{"class_name":"HibernateConfig","method_name":"sessionFactory","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b0b3bbcc1e0b0e6ca6809eb05a0346ba83498c13333991e50125d482353e1f01","line_count":9}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java:com.example.shoppingapplicationbeckend.config.HibernateConfig.hibernateTransactionManager:57","symbol_type":"method","name":"hibernateTransactionManager","qualified_name":"com.example.shoppingapplicationbeckend.config.HibernateConfig.hibernateTransactionManager","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/HibernateConfig.java","start_line":57,"end_line":63,"source":"@Bean(name = \"transactionManager\")\n    @Primary\n    public PlatformTransactionManager hibernateTransactionManager() {\n        HibernateTransactionManager transactionManager = new HibernateTransactionManager();\n        transactionManager.setSessionFactory(sessionFactory().getObject());\n        return transactionManager;\n    }","doc":null,"annotations":[{"name":"Bean","arguments":{"name":"\"transactionManager\""},"raw_text":"@Bean(name = \"transactionManager\")"},{"name":"Primary","arguments":null,"raw_text":"@Primary"}],"metadata":{"class_name":"HibernateConfig","method_name":"hibernateTransactionManager","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"91444612270c059f9b654721c9e1e9b45069274a24525142b9a27bac37cc44a1","line_count":7}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/JacksonConfiguration.java:com.example.shoppingapplicationbeckend.config.JacksonConfiguration.configureMessageConverters:24","symbol_type":"method","name":"configureMessageConverters","qualified_name":"com.example.shoppingapplicationbeckend.config.JacksonConfiguration.configureMessageConverters","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/JacksonConfiguration.java","start_line":24,"end_line":27,"source":"@Override\n    public void configureMessageConverters(List<org.springframework.http.converter.HttpMessageConverter<?>> converters) {\n        converters.add(mappingJackson2HttpMessageConverter());\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"JacksonConfiguration","method_name":"configureMessageConverters","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"d94d8656fe57862de2822c8bd688cfa44dede591ff527f9a6a5414db49a045ac","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/JacksonConfiguration.java:com.example.shoppingapplicationbeckend.config.JacksonConfiguration.mappingJackson2HttpMessageConverter:29","symbol_type":"method","name":"mappingJackson2HttpMessageConverter","qualified_name":"com.example.shoppingapplicationbeckend.config.JacksonConfiguration.mappingJackson2HttpMessageConverter","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/config/JacksonConfiguration.java","start_line":29,"end_line":67,"source":"public MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter() {\n        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter() {\n            @Override\n            protected void writeInternal(Object object, HttpOutputMessage outputMessage)\n                    throws IOException, HttpMessageNotWritableException {\n                \n                ObjectMapper mapper = getObjectMapper();\n                \n                // Determine view based on user role\n                Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n                Class<?> view = Views.User.class; // Default to user view\n                \n                if (authentication != null && authentication.isAuthenticated()) {\n                    Collection<? extends GrantedAuthority> authorities = authentication.getAuthorities();\n                    boolean isAdmin = authorities.stream()\n                            .anyMatch(auth -> \"ROLE_ADMIN\".equals(auth.getAuthority()));\n                    \n                    if (isAdmin) {\n                        view = Views.Admin.class;\n                    }\n                }\n                \n                // Create a new ObjectMapper with the view configuration\n                ObjectMapper viewMapper = mapper.copy();\n                viewMapper.setConfig(viewMapper.getSerializationConfig().withView(view));\n                \n                // Serialize using the configured view\n                outputMessage.getBody().write(viewMapper.writeValueAsBytes(object));\n            }\n        };\n        \n        ObjectMapper mapper = new ObjectMapper();\n        mapper.registerModule(new JavaTimeModule()); // Enable Java 8 date/time support\n        mapper.disable(com.fasterxml.jackson.databind.SerializationFeature.WRITE_DATES_AS_TIMESTAMPS); // Write dates as ISO-8601 strings\n        mapper.disable(MapperFeature.DEFAULT_VIEW_INCLUSION);\n        converter.setObjectMapper(mapper);\n        \n        return converter;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JacksonConfiguration","method_name":"mappingJackson2HttpMessageConverter","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"344036dc067d56bf93bb5e1913d502e1a3dec41a8ce069801f22bbff8ee3b66d","line_count":39}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/AuthController.java:com.example.shoppingapplicationbeckend.controller.AuthController.authenticateUser:34","symbol_type":"method","name":"authenticateUser","qualified_name":"com.example.shoppingapplicationbeckend.controller.AuthController.authenticateUser","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/AuthController.java","start_line":34,"end_line":56,"source":"@PostMapping(\"/login\")\n    public ResponseEntity<ApiResponse<JwtResponse>> authenticateUser(@Valid @RequestBody LoginRequest loginRequest) {\n        try {\n            Authentication authentication = authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(loginRequest.getUsername(), loginRequest.getPassword()));\n\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n            String jwt = jwtUtils.generateJwtToken(authentication);\n\n            UserPrincipal userDetails = (UserPrincipal) authentication.getPrincipal();\n\n            JwtResponse jwtResponse = new JwtResponse(jwt,\n                                                   userDetails.getId(),\n                                                   userDetails.getUsername(),\n                                                   userDetails.getEmail(),\n                                                   userDetails.getAuthorities());\n            \n            return ResponseEntity.ok(ApiResponse.success(\"Login successful\", jwtResponse));\n        } catch (Exception e) {\n            e.printStackTrace(); // Add logging to see the actual error\n            return ResponseEntity.badRequest().body(ApiResponse.error(\"Invalid username or password: \" + e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"PostMapping","arguments":{"value":"\"/login\""},"raw_text":"@PostMapping(\"/login\")"}],"metadata":{"class_name":"AuthController","method_name":"authenticateUser","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b2c90d3fc4bd6ae7f850d865d30818343bf9734ce09f9cb3a0493db6d119ff0e","line_count":23}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/AuthController.java:com.example.shoppingapplicationbeckend.controller.AuthController.registerUser:58","symbol_type":"method","name":"registerUser","qualified_name":"com.example.shoppingapplicationbeckend.controller.AuthController.registerUser","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/AuthController.java","start_line":58,"end_line":84,"source":"@PostMapping(\"/signup\")\n    public ResponseEntity<ApiResponse<MessageResponse>> registerUser(@Valid @RequestBody SignupRequest signUpRequest) {\n        try {\n            // Check if username exists\n            if (userService.userExistsByUsername(signUpRequest.getUsername())) {\n                return ResponseEntity.badRequest().body(ApiResponse.error(\"Username is already taken!\"));\n            }\n\n            // Check if email exists\n            if (userService.userExistsByEmail(signUpRequest.getEmail())) {\n                return ResponseEntity.badRequest().body(ApiResponse.error(\"Email is already in use!\"));\n            }\n\n            // Create new user with plain text password (NOT RECOMMENDED FOR PRODUCTION)\n            userService.registerUser(\n                signUpRequest.getUsername(),\n                signUpRequest.getEmail(),\n                signUpRequest.getPassword()  // Plain text password - no encoding\n            );\n\n            MessageResponse response = new MessageResponse(\"User registered successfully!\");\n            return ResponseEntity.ok(ApiResponse.success(\"Registration completed\", response));\n\n        } catch (Exception e) {\n            return ResponseEntity.badRequest().body(ApiResponse.error(\"Registration failed: \" + e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"PostMapping","arguments":{"value":"\"/signup\""},"raw_text":"@PostMapping(\"/signup\")"}],"metadata":{"class_name":"AuthController","method_name":"registerUser","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"829f1f90fa07131be773517ddfaebb5f519be290c776da294227cb39ed0b73ca","line_count":27}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java:com.example.shoppingapplicationbeckend.controller.OrderController.OrderController:27","symbol_type":"method","name":"OrderController","qualified_name":"com.example.shoppingapplicationbeckend.controller.OrderController.OrderController","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java","start_line":27,"end_line":30,"source":"@Autowired\n    public OrderController(OrderService orderService) {\n        this.orderService = orderService;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"OrderController","method_name":"OrderController","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"05e4d9b3c86ae64f5f281a9b0273f09ea257db053b99808a14f2366629e32d23","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java:com.example.shoppingapplicationbeckend.controller.OrderController.createOrder:33","symbol_type":"method","name":"createOrder","qualified_name":"com.example.shoppingapplicationbeckend.controller.OrderController.createOrder","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java","start_line":33,"end_line":48,"source":"@PostMapping\n    public ResponseEntity<?> createOrder(@RequestBody OrderCreateRequest orderRequest) {\n        try {\n            Order createdOrder = orderService.createOrderForCurrentUser(orderRequest.getOrder());\n            return ResponseEntity.status(HttpStatus.CREATED).body(createdOrder);\n        } catch (AccessDeniedException e) {\n            return ResponseEntity.status(HttpStatus.UNAUTHORIZED)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (NotEnoughInventoryException e) {\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"PostMapping","arguments":null,"raw_text":"@PostMapping"}],"metadata":{"class_name":"OrderController","method_name":"createOrder","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"43fa3679c6d3e2e7a45b804dfaead56bdb2b3e35d47f569078899f7a2b8637e8","line_count":16}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java:com.example.shoppingapplicationbeckend.controller.OrderController.getOrderById:51","symbol_type":"method","name":"getOrderById","qualified_name":"com.example.shoppingapplicationbeckend.controller.OrderController.getOrderById","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java","start_line":51,"end_line":65,"source":"@GetMapping(\"/{id}\")\n    public ResponseEntity<?> getOrderById(@PathVariable Long id) {\n        try {\n            Optional<Order> order = orderService.getOrderById(id);\n            if (order.isPresent()) {\n                return ResponseEntity.ok(ApiResponse.success(order.get()));\n            } else {\n                return ResponseEntity.status(HttpStatus.NOT_FOUND)\n                        .body(ApiResponse.error(\"error\", \"Order not found\"));\n            }\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/{id}\""},"raw_text":"@GetMapping(\"/{id}\")"}],"metadata":{"class_name":"OrderController","method_name":"getOrderById","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"c239a784309728af63977d2ef5d3090de95492b75792150aa3d5bbcaec5ac17c","line_count":15}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java:com.example.shoppingapplicationbeckend.controller.OrderController.getAllOrders:68","symbol_type":"method","name":"getAllOrders","qualified_name":"com.example.shoppingapplicationbeckend.controller.OrderController.getAllOrders","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java","start_line":68,"end_line":80,"source":"@GetMapping(\"/all\")\n    public ResponseEntity<?> getAllOrders() {\n        try {\n            List<Order> orders = orderService.getOrdersForCurrentUserContext();\n            return ResponseEntity.ok(ApiResponse.success(orders));\n        } catch (AccessDeniedException e) {\n            return ResponseEntity.status(HttpStatus.FORBIDDEN)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/all\""},"raw_text":"@GetMapping(\"/all\")"}],"metadata":{"class_name":"OrderController","method_name":"getAllOrders","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"d440aa3f91cbaf98dde3a23d2a652ce7f01459cba4d3bc86cc130f1988ccfde1","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java:com.example.shoppingapplicationbeckend.controller.OrderController.cancelOrder:83","symbol_type":"method","name":"cancelOrder","qualified_name":"com.example.shoppingapplicationbeckend.controller.OrderController.cancelOrder","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java","start_line":83,"end_line":95,"source":"@PatchMapping(\"/{id}/cancel\")\n    public ResponseEntity<?> cancelOrder(@PathVariable Long id) {\n        try {\n            Order canceledOrder = orderService.cancelOrder(id);\n            return ResponseEntity.ok(ApiResponse.success(\"Order canceled successfully\", canceledOrder));\n        } catch (RuntimeException e) {\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"PatchMapping","arguments":{"value":"\"/{id}/cancel\""},"raw_text":"@PatchMapping(\"/{id}/cancel\")"}],"metadata":{"class_name":"OrderController","method_name":"cancelOrder","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"326031296a89d5f16bd8e7b42e1d75cbbf56e34cc8234d18a59432441f7b8dbb","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java:com.example.shoppingapplicationbeckend.controller.OrderController.completeOrder:98","symbol_type":"method","name":"completeOrder","qualified_name":"com.example.shoppingapplicationbeckend.controller.OrderController.completeOrder","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/OrderController.java","start_line":98,"end_line":110,"source":"@PatchMapping(\"/{id}/complete\")\n    public ResponseEntity<?> completeOrder(@PathVariable Long id) {\n        try {\n            Order completedOrder = orderService.completeOrder(id);\n            return ResponseEntity.ok(ApiResponse.success(\"Order completed successfully\", completedOrder));\n        } catch (RuntimeException e) {\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"PatchMapping","arguments":{"value":"\"/{id}/complete\""},"raw_text":"@PatchMapping(\"/{id}/complete\")"}],"metadata":{"class_name":"OrderController","method_name":"completeOrder","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"27fbf2465d3e2afdd57a5f25a266f9015689c16ce9e7a98636d72f6764fa4165","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.ProductController:25","symbol_type":"method","name":"ProductController","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.ProductController","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":25,"end_line":29,"source":"@Autowired\n    public ProductController(ProductService productService, JsonViewSupport jsonViewSupport) {\n        this.productService = productService;\n        this.jsonViewSupport = jsonViewSupport;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"ProductController","method_name":"ProductController","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"3764bf9189ae292a22a5abf660fe248aa712b38c05f1817ae2247415a8377c57","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.createProduct:32","symbol_type":"method","name":"createProduct","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.createProduct","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":32,"end_line":48,"source":"@PostMapping\n    public ResponseEntity<ApiResponse<Product>> createProduct(@Valid @RequestBody ProductRequest productRequest) {\n        try {\n            Product createdProduct = productService.createProduct(\n                productRequest.getName(), \n                productRequest.getDescription(), \n                productRequest.getRetailPrice(), \n                productRequest.getWholesalePrice(), \n                productRequest.getQuantity()\n            );\n            return ResponseEntity.status(HttpStatus.CREATED)\n                    .body(ApiResponse.success(\"Product created successfully\", createdProduct));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                    .body(ApiResponse.error(e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"PostMapping","arguments":null,"raw_text":"@PostMapping"}],"metadata":{"class_name":"ProductController","method_name":"createProduct","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"d38413de15225f252273391d398ea9b75ef110c02db810e6a21d1e28e42ea2b5","line_count":17}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.getProductById:51","symbol_type":"method","name":"getProductById","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.getProductById","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":51,"end_line":63,"source":"@GetMapping(\"/{id}\")\n    public ResponseEntity<?> getProductById(@PathVariable Long id) {\n        try {\n            Optional<Product> product = productService.getProductById(id);\n            if (product.isPresent()) {\n                return jsonViewSupport.respondOk(ApiResponse.success(product.get()));\n            } else {\n                return jsonViewSupport.respond(HttpStatus.NOT_FOUND, ApiResponse.error(\"Product not found\"));\n            }\n        } catch (Exception e) {\n            return jsonViewSupport.respond(HttpStatus.INTERNAL_SERVER_ERROR, ApiResponse.error(e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/{id}\""},"raw_text":"@GetMapping(\"/{id}\")"}],"metadata":{"class_name":"ProductController","method_name":"getProductById","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"9202091809ef7d01b9a036ffec21521ff1b96392a77e9a3daae3ed4dea20a8f5","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.getAllProducts:66","symbol_type":"method","name":"getAllProducts","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.getAllProducts","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":66,"end_line":75,"source":"@GetMapping(\"/all\")\n    public ResponseEntity<?> getAllProducts() {\n        try {\n            List<Product> products = productService.getAllProducts();\n            return jsonViewSupport.respondOk(ApiResponse.success(products));\n        } catch (Exception e) {\n            e.printStackTrace();\n            return jsonViewSupport.respond(HttpStatus.INTERNAL_SERVER_ERROR, ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/all\""},"raw_text":"@GetMapping(\"/all\")"}],"metadata":{"class_name":"ProductController","method_name":"getAllProducts","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"182894dd454b69d7e2eca1e36e7f586aeb07de112c6879805343b6066026f6f4","line_count":10}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.updateProduct:78","symbol_type":"method","name":"updateProduct","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.updateProduct","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":78,"end_line":96,"source":"@PatchMapping(\"/{id}\")\n    public ResponseEntity<ApiResponse<Product>> updateProduct(@PathVariable Long id, @RequestBody ProductRequest productRequest) {\n        try {\n            String name = productRequest.getName();\n            String description = productRequest.getDescription();\n            Double retailPrice = productRequest.getRetailPrice();\n            Double wholesalePrice = productRequest.getWholesalePrice();\n            Integer quantity = productRequest.getQuantity();\n            \n            Product updatedProduct = productService.updateProduct(id, name, description, retailPrice, wholesalePrice, quantity);\n            return ResponseEntity.ok(ApiResponse.success(updatedProduct));\n        } catch (RuntimeException e) {\n            return ResponseEntity.status(HttpStatus.NOT_FOUND)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"PatchMapping","arguments":{"value":"\"/{id}\""},"raw_text":"@PatchMapping(\"/{id}\")"}],"metadata":{"class_name":"ProductController","method_name":"updateProduct","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"17dfb88305f76bc199a66dc2e7db24cbbeb24279c314b505c43c1117db94d24a","line_count":19}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.getMostFrequentlyPurchasedProducts:101","symbol_type":"method","name":"getMostFrequentlyPurchasedProducts","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.getMostFrequentlyPurchasedProducts","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":101,"end_line":121,"source":"@GetMapping(\"/frequent/{limit}\")\n    public ResponseEntity<?> getMostFrequentlyPurchasedProducts(@PathVariable int limit) {\n        try {\n            Long currentUserId = SecurityUtil.getCurrentUserId();\n            if (currentUserId == null) {\n                return jsonViewSupport.respond(HttpStatus.UNAUTHORIZED, ApiResponse.error(\"User not authenticated\"));\n            }\n\n            List<ProductStatsInfo> frequentProducts = productService.getFrequentProductsForUser(currentUserId, limit);\n            if (frequentProducts.isEmpty()) {\n                return jsonViewSupport.respondOk(ApiResponse.success(\"No frequent products available yet\", frequentProducts));\n            }\n\n            return jsonViewSupport.respondOk(ApiResponse.success(\n                \"Frequent products retrieved successfully\",\n                frequentProducts\n            ));\n        } catch (Exception e) {\n            return jsonViewSupport.respond(HttpStatus.INTERNAL_SERVER_ERROR, ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/frequent/{limit}\""},"raw_text":"@GetMapping(\"/frequent/{limit}\")"}],"metadata":{"class_name":"ProductController","method_name":"getMostFrequentlyPurchasedProducts","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"363f24cf42a24dd8805bacacbd57983c06f0383b2527a0105c95e586a1352e20","line_count":21}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.getMostRecentlyPurchasedProducts:124","symbol_type":"method","name":"getMostRecentlyPurchasedProducts","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.getMostRecentlyPurchasedProducts","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":124,"end_line":132,"source":"@GetMapping(\"/recent/{limit}\")\n    public ResponseEntity<?> getMostRecentlyPurchasedProducts(@PathVariable int limit) {\n        try {\n            List<ProductStatsInfo> products = productService.getMostRecentlyPurchasedProductsForUser(limit);\n            return jsonViewSupport.respondOk(ApiResponse.success(products));\n        } catch (Exception e) {\n            return jsonViewSupport.respond(HttpStatus.INTERNAL_SERVER_ERROR, ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/recent/{limit}\""},"raw_text":"@GetMapping(\"/recent/{limit}\")"}],"metadata":{"class_name":"ProductController","method_name":"getMostRecentlyPurchasedProducts","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"4c72d19bd48e84707f8d6ab65ab0b3b2ddc61f537a4d63ff00c5cc57a09ab2b3","line_count":9}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.getMostProfitableProducts:135","symbol_type":"method","name":"getMostProfitableProducts","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.getMostProfitableProducts","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":135,"end_line":143,"source":"@GetMapping(\"/profit/{limit}\")\n    public ResponseEntity<?> getMostProfitableProducts(@PathVariable int limit) {\n        try {\n            List<ProductStatsInfo> result = productService.getMostProfitableProductsAdminWithProfit(limit);\n            return jsonViewSupport.respondOk(ApiResponse.success(\"Most profitable products with total profit\", result));\n        } catch (Exception e) {\n            return jsonViewSupport.respond(HttpStatus.INTERNAL_SERVER_ERROR, ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/profit/{limit}\""},"raw_text":"@GetMapping(\"/profit/{limit}\")"}],"metadata":{"class_name":"ProductController","method_name":"getMostProfitableProducts","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"06d5a6b3664c95bd026565277fa529f147e6916b36ae7f06539be72cffb875dd","line_count":9}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.getMostPopularProducts:146","symbol_type":"method","name":"getMostPopularProducts","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.getMostPopularProducts","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":146,"end_line":154,"source":"@GetMapping(\"/popular/{limit}\")\n    public ResponseEntity<?> getMostPopularProducts(@PathVariable int limit) {\n        try {\n            List<ProductStatsInfo> products = productService.getMostPopularProductsAdmin(limit);\n            return jsonViewSupport.respondOk(ApiResponse.success(products));\n        } catch (Exception e) {\n            return jsonViewSupport.respond(HttpStatus.INTERNAL_SERVER_ERROR, ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/popular/{limit}\""},"raw_text":"@GetMapping(\"/popular/{limit}\")"}],"metadata":{"class_name":"ProductController","method_name":"getMostPopularProducts","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f6193b39f6fafc912882d8adf2403a688015e161e984dd856833eca87f317891","line_count":9}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java:com.example.shoppingapplicationbeckend.controller.ProductController.getProductsBySaleTotal:156","symbol_type":"method","name":"getProductsBySaleTotal","qualified_name":"com.example.shoppingapplicationbeckend.controller.ProductController.getProductsBySaleTotal","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/ProductController.java","start_line":156,"end_line":164,"source":"@GetMapping(\"/sale_total\")\n    public ResponseEntity<?> getProductsBySaleTotal() {\n        try {\n            ProductStatsInfo productsInfo = productService.getProductsBySaleTotal();\n            return jsonViewSupport.respondOk(ApiResponse.success(productsInfo));\n        } catch (Exception e) {\n            return jsonViewSupport.respond(HttpStatus.INTERNAL_SERVER_ERROR, ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/sale_total\""},"raw_text":"@GetMapping(\"/sale_total\")"}],"metadata":{"class_name":"ProductController","method_name":"getProductsBySaleTotal","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"9875f617dfac04692fd7e41bea862efe066f69f201d5f69732b6d9660879181d","line_count":9}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/WatchlistController.java:com.example.shoppingapplicationbeckend.controller.WatchlistController.WatchlistController:23","symbol_type":"method","name":"WatchlistController","qualified_name":"com.example.shoppingapplicationbeckend.controller.WatchlistController.WatchlistController","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/WatchlistController.java","start_line":23,"end_line":26,"source":"@Autowired\n    public WatchlistController(WatchlistService watchlistService) {\n        this.watchlistService = watchlistService;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"WatchlistController","method_name":"WatchlistController","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"e7a15b9a70e64e69d27d0952b963eecbae8c0e16e032c7247ad71aa6ffc46483","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/WatchlistController.java:com.example.shoppingapplicationbeckend.controller.WatchlistController.getAllWatchlistProducts:29","symbol_type":"method","name":"getAllWatchlistProducts","qualified_name":"com.example.shoppingapplicationbeckend.controller.WatchlistController.getAllWatchlistProducts","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/WatchlistController.java","start_line":29,"end_line":41,"source":"@GetMapping(\"/products/all\")\n    public ResponseEntity<?> getAllWatchlistProducts() {\n        try {\n            Set<Product> watchlist = watchlistService.getUserWatchlist(); // Changed to filter in-stock only\n            return ResponseEntity.ok(ApiResponse.success(watchlist));\n        } catch (RuntimeException e) {\n            return ResponseEntity.status(HttpStatus.NOT_FOUND)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"GetMapping","arguments":{"value":"\"/products/all\""},"raw_text":"@GetMapping(\"/products/all\")"}],"metadata":{"class_name":"WatchlistController","method_name":"getAllWatchlistProducts","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"c221dd902fd8e2c7a6233be297e69cd8ec21a1db95a48fd5c5d724ec5aec1cd8","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/WatchlistController.java:com.example.shoppingapplicationbeckend.controller.WatchlistController.addToWatchlist:44","symbol_type":"method","name":"addToWatchlist","qualified_name":"com.example.shoppingapplicationbeckend.controller.WatchlistController.addToWatchlist","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/WatchlistController.java","start_line":44,"end_line":56,"source":"@PostMapping(\"/product/{productId}\")\n    public ResponseEntity<?> addToWatchlist(@PathVariable Long productId) {\n        try {\n            Set<Product> updatedWatchlist = watchlistService.addToWatchlist(productId);\n            return ResponseEntity.ok(ApiResponse.success(\"Product added to watchlist\", updatedWatchlist));\n        } catch (RuntimeException e) {\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"PostMapping","arguments":{"value":"\"/product/{productId}\""},"raw_text":"@PostMapping(\"/product/{productId}\")"}],"metadata":{"class_name":"WatchlistController","method_name":"addToWatchlist","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"6914b00e544ff73ea2e73ce3afc2e46e991abcca710ec3cd632d16269f680787","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/WatchlistController.java:com.example.shoppingapplicationbeckend.controller.WatchlistController.removeFromWatchlist:59","symbol_type":"method","name":"removeFromWatchlist","qualified_name":"com.example.shoppingapplicationbeckend.controller.WatchlistController.removeFromWatchlist","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/controller/WatchlistController.java","start_line":59,"end_line":71,"source":"@DeleteMapping(\"/product/{productId}\")\n    public ResponseEntity<?> removeFromWatchlist(@PathVariable Long productId) {\n        try {\n            Set<Product> updatedWatchlist = watchlistService.removeFromWatchlist(productId);\n            return ResponseEntity.ok(ApiResponse.success(\"Product removed from watchlist\", updatedWatchlist));\n        } catch (RuntimeException e) {\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(ApiResponse.error(\"error\", e.getMessage()));\n        }\n    }","doc":null,"annotations":[{"name":"DeleteMapping","arguments":{"value":"\"/product/{productId}\""},"raw_text":"@DeleteMapping(\"/product/{productId}\")"}],"metadata":{"class_name":"WatchlistController","method_name":"removeFromWatchlist","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"c37293dfaa34add7fbedfe0270fa05cfad3c0eb2ce77c677cca5940ca802f01a","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java:com.example.shoppingapplicationbeckend.dao.OrderDao.OrderDao:20","symbol_type":"method","name":"OrderDao","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderDao.OrderDao","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java","start_line":20,"end_line":23,"source":"@Autowired\n    public OrderDao(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"OrderDao","method_name":"OrderDao","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"aec5ce1ac7ce3d7785c1e3566d7b8d7610df39c0a6fc6336d29804c93e660a7c","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java:com.example.shoppingapplicationbeckend.dao.OrderDao.getCurrentSession:25","symbol_type":"method","name":"getCurrentSession","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderDao.getCurrentSession","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java","start_line":25,"end_line":27,"source":"private Session getCurrentSession() {\n        return sessionFactory.getCurrentSession();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderDao","method_name":"getCurrentSession","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"13abf2156a7d0b0290c855d5257a59375a1e4625b385bc533c5d5e986118ba80","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java:com.example.shoppingapplicationbeckend.dao.OrderDao.save:29","symbol_type":"method","name":"save","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderDao.save","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java","start_line":29,"end_line":32,"source":"public Order save(Order order) {\n        getCurrentSession().save(order);\n        return order;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderDao","method_name":"save","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"12f79efc53312a1f93074249dd0069df6046865670cbec45ec6b339a9ed93480","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java:com.example.shoppingapplicationbeckend.dao.OrderDao.findById:34","symbol_type":"method","name":"findById","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderDao.findById","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java","start_line":34,"end_line":37,"source":"public Optional<Order> findById(Long id) {\n        Order order = getCurrentSession().get(Order.class, id);\n        return Optional.ofNullable(order);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderDao","method_name":"findById","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"504b03349415c16a8546aa612b73ae14a87dc3a81188c882f15d054e8f23d1bd","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java:com.example.shoppingapplicationbeckend.dao.OrderDao.findAll:40","symbol_type":"method","name":"findAll","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderDao.findAll","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java","start_line":40,"end_line":43,"source":"public List<Order> findAll() {\n        Query<Order> query = getCurrentSession().createQuery(\"FROM Order\", Order.class);\n        return query.getResultList();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderDao","method_name":"findAll","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"944d63dfd1d414d12d71fd151f520b9ae6f67d51a860066ab7a6f9ad0f2b543c","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java:com.example.shoppingapplicationbeckend.dao.OrderDao.update:45","symbol_type":"method","name":"update","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderDao.update","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java","start_line":45,"end_line":48,"source":"public Order update(Order order) {\n        getCurrentSession().update(order);\n        return order;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderDao","method_name":"update","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b241e33e95dd8307974100eb1fb7e1e61b610e3e06ead62f50c6852b47171047","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java:com.example.shoppingapplicationbeckend.dao.OrderDao.findByUser:50","symbol_type":"method","name":"findByUser","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderDao.findByUser","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderDao.java","start_line":50,"end_line":55,"source":"public List<Order> findByUser(User user) {\n        Query<Order> query = getCurrentSession()\n                .createQuery(\"FROM Order WHERE user = :user\", Order.class);\n        query.setParameter(\"user\", user);\n        return query.getResultList();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderDao","method_name":"findByUser","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"4c75269f999f8571a3a7af50ed8bf0e64b327da246ed0cc1a0ab60e9671bf436","line_count":6}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderItemDao.java:com.example.shoppingapplicationbeckend.dao.OrderItemDao.OrderItemDao:19","symbol_type":"method","name":"OrderItemDao","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderItemDao.OrderItemDao","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderItemDao.java","start_line":19,"end_line":22,"source":"@Autowired\n    public OrderItemDao(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"OrderItemDao","method_name":"OrderItemDao","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"5a1c7d9827b150dfe67a43c1194315860fab8b50a83eb3506e1b06a1b8223df2","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderItemDao.java:com.example.shoppingapplicationbeckend.dao.OrderItemDao.getCurrentSession:24","symbol_type":"method","name":"getCurrentSession","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderItemDao.getCurrentSession","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderItemDao.java","start_line":24,"end_line":26,"source":"private Session getCurrentSession() {\n        return sessionFactory.getCurrentSession();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderItemDao","method_name":"getCurrentSession","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"13abf2156a7d0b0290c855d5257a59375a1e4625b385bc533c5d5e986118ba80","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderItemDao.java:com.example.shoppingapplicationbeckend.dao.OrderItemDao.save:28","symbol_type":"method","name":"save","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderItemDao.save","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderItemDao.java","start_line":28,"end_line":31,"source":"public OrderItem save(OrderItem orderItem) {\n        getCurrentSession().save(orderItem);\n        return orderItem;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderItemDao","method_name":"save","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"479d8550ba096ba441b1ae6fca2b3bb64064a4e86491cb09a217d2a1c24c9ebe","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderItemDao.java:com.example.shoppingapplicationbeckend.dao.OrderItemDao.findCompletedItemsByUserId:33","symbol_type":"method","name":"findCompletedItemsByUserId","qualified_name":"com.example.shoppingapplicationbeckend.dao.OrderItemDao.findCompletedItemsByUserId","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/OrderItemDao.java","start_line":33,"end_line":45,"source":"public List<OrderItem> findCompletedItemsByUserId(Long userId) {\n        if (userId == null) {\n            return Collections.emptyList();\n        }\n        NativeQuery<OrderItem> query = getCurrentSession().createNativeQuery(\n                \"SELECT oi.* FROM order_item oi \" +\n                \"INNER JOIN `order` o ON oi.order_id = o.order_id \" +\n                \"WHERE o.user_id = :userId AND o.order_status = :completedStatus\",\n                OrderItem.class);\n        query.setParameter(\"userId\", userId);\n        query.setParameter(\"completedStatus\", \"COMPLETED\");\n        return query.getResultList();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderItemDao","method_name":"findCompletedItemsByUserId","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"90933076e5b538dec08a5d198f762f585e39a73d4e8e66b0c8bb698b1177f7ff","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/PermissionDao.java:com.example.shoppingapplicationbeckend.dao.PermissionDao.PermissionDao:18","symbol_type":"method","name":"PermissionDao","qualified_name":"com.example.shoppingapplicationbeckend.dao.PermissionDao.PermissionDao","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/PermissionDao.java","start_line":18,"end_line":21,"source":"@Autowired\n    public PermissionDao(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"PermissionDao","method_name":"PermissionDao","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"ba44224ba1cdacee099a0f36c323cb4282af38372b30aa2528ed684ae13111ef","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/PermissionDao.java:com.example.shoppingapplicationbeckend.dao.PermissionDao.getCurrentSession:23","symbol_type":"method","name":"getCurrentSession","qualified_name":"com.example.shoppingapplicationbeckend.dao.PermissionDao.getCurrentSession","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/PermissionDao.java","start_line":23,"end_line":25,"source":"private Session getCurrentSession() {\n        return sessionFactory.getCurrentSession();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"PermissionDao","method_name":"getCurrentSession","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"13abf2156a7d0b0290c855d5257a59375a1e4625b385bc533c5d5e986118ba80","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/PermissionDao.java:com.example.shoppingapplicationbeckend.dao.PermissionDao.save:27","symbol_type":"method","name":"save","qualified_name":"com.example.shoppingapplicationbeckend.dao.PermissionDao.save","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/PermissionDao.java","start_line":27,"end_line":29,"source":"public void save(Permission permission) {\n        getCurrentSession().save(permission);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"PermissionDao","method_name":"save","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b6d50a721d5227ef551adf133987401928ea43eb680d0521492b9fb324d04255","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/PermissionDao.java:com.example.shoppingapplicationbeckend.dao.PermissionDao.findByUserId:31","symbol_type":"method","name":"findByUserId","qualified_name":"com.example.shoppingapplicationbeckend.dao.PermissionDao.findByUserId","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/PermissionDao.java","start_line":31,"end_line":36,"source":"public List<Permission> findByUserId(Long userId) {\n        Query<Permission> query = getCurrentSession()\n                .createQuery(\"FROM Permission WHERE userId = :userId\", Permission.class);\n        query.setParameter(\"userId\", userId);\n        return query.getResultList();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"PermissionDao","method_name":"findByUserId","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"4988ba8ecfd223868cfe0a2fb9887685434caded819c007dfedbee53854770d3","line_count":6}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java:com.example.shoppingapplicationbeckend.dao.ProductDao.ProductDao:20","symbol_type":"method","name":"ProductDao","qualified_name":"com.example.shoppingapplicationbeckend.dao.ProductDao.ProductDao","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java","start_line":20,"end_line":23,"source":"@Autowired\n    public ProductDao(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"ProductDao","method_name":"ProductDao","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"1e3d05e4b504a7bb4858239be4544c885ec798ef8736a677b5ed1d6c8a7f7cca","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java:com.example.shoppingapplicationbeckend.dao.ProductDao.getCurrentSession:25","symbol_type":"method","name":"getCurrentSession","qualified_name":"com.example.shoppingapplicationbeckend.dao.ProductDao.getCurrentSession","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java","start_line":25,"end_line":27,"source":"private Session getCurrentSession() {\n        return sessionFactory.getCurrentSession();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductDao","method_name":"getCurrentSession","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"13abf2156a7d0b0290c855d5257a59375a1e4625b385bc533c5d5e986118ba80","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java:com.example.shoppingapplicationbeckend.dao.ProductDao.save:29","symbol_type":"method","name":"save","qualified_name":"com.example.shoppingapplicationbeckend.dao.ProductDao.save","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java","start_line":29,"end_line":32,"source":"public Product save(Product product) {\n        getCurrentSession().save(product);\n        return product;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductDao","method_name":"save","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"5ccf777c0f03ae0937d6bcde11219b5bec1bbd68634470b686ee836d9ce41316","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java:com.example.shoppingapplicationbeckend.dao.ProductDao.findById:34","symbol_type":"method","name":"findById","qualified_name":"com.example.shoppingapplicationbeckend.dao.ProductDao.findById","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java","start_line":34,"end_line":37,"source":"public Optional<Product> findById(Long id) {\n        Product product = getCurrentSession().get(Product.class, id);\n        return Optional.ofNullable(product);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductDao","method_name":"findById","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f233a9e4c6950c19a0dc384714a860e452286e62e960f9aa24cdb75601abeff6","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java:com.example.shoppingapplicationbeckend.dao.ProductDao.findAll:39","symbol_type":"method","name":"findAll","qualified_name":"com.example.shoppingapplicationbeckend.dao.ProductDao.findAll","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java","start_line":39,"end_line":43,"source":"@Transactional(readOnly = true)\n    public List<Product> findAll() {\n        Query<Product> query = getCurrentSession().createQuery(\"FROM Product\", Product.class);\n        return query.getResultList();\n    }","doc":null,"annotations":[{"name":"Transactional","arguments":null,"raw_text":"@Transactional(readOnly = true)"}],"metadata":{"class_name":"ProductDao","method_name":"findAll","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"e3d9a4eb4beaadbc786d8fd925291c9f1e4b0186e9799c44f3c785501894cb62","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java:com.example.shoppingapplicationbeckend.dao.ProductDao.update:45","symbol_type":"method","name":"update","qualified_name":"com.example.shoppingapplicationbeckend.dao.ProductDao.update","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java","start_line":45,"end_line":48,"source":"public Product update(Product product) {\n        getCurrentSession().update(product);\n        return product;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductDao","method_name":"update","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"31f2d676050d1949e95bfed38be9e3347ef9050d555e27ed3e1800c02ebd4756","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java:com.example.shoppingapplicationbeckend.dao.ProductDao.findByQuantityGreaterThan:50","symbol_type":"method","name":"findByQuantityGreaterThan","qualified_name":"com.example.shoppingapplicationbeckend.dao.ProductDao.findByQuantityGreaterThan","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java","start_line":50,"end_line":56,"source":"@Transactional(readOnly = true)\n    public List<Product> findByQuantityGreaterThan(Integer quantity) {\n        Query<Product> query = getCurrentSession()\n                .createQuery(\"FROM Product WHERE quantity > :quantity\", Product.class);\n        query.setParameter(\"quantity\", quantity);\n        return query.getResultList();\n    }","doc":null,"annotations":[{"name":"Transactional","arguments":null,"raw_text":"@Transactional(readOnly = true)"}],"metadata":{"class_name":"ProductDao","method_name":"findByQuantityGreaterThan","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"7aa2e775824ad91467122c3857c20fff6b1523709ec9a2e3fffd9046caa170fc","line_count":7}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java:com.example.shoppingapplicationbeckend.dao.ProductDao.findTopPurchasedProductsByUser:58","symbol_type":"method","name":"findTopPurchasedProductsByUser","qualified_name":"com.example.shoppingapplicationbeckend.dao.ProductDao.findTopPurchasedProductsByUser","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/ProductDao.java","start_line":58,"end_line":76,"source":"@Transactional(readOnly = true)\n    public List<Product> findTopPurchasedProductsByUser(Long userId, int limit) {\n        if (userId == null || limit <= 0) {\n            return Collections.emptyList();\n        }\n\n        String hql =\n            \"SELECT oi.product FROM OrderItem oi \" +\n            \"JOIN oi.order o \" +\n            \"WHERE o.user.userId = :userId AND o.orderStatus = :completedStatus \" +\n            \"GROUP BY oi.product \" +\n            \"ORDER BY SUM(oi.quantity) DESC, oi.product.productId ASC\";\n\n        Query<Product> query = getCurrentSession().createQuery(hql, Product.class);\n        query.setParameter(\"userId\", userId);\n        query.setParameter(\"completedStatus\", \"COMPLETED\");\n        query.setMaxResults(limit);\n        return query.getResultList();\n    }","doc":null,"annotations":[{"name":"Transactional","arguments":null,"raw_text":"@Transactional(readOnly = true)"}],"metadata":{"class_name":"ProductDao","method_name":"findTopPurchasedProductsByUser","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"8638eab2e2b12b99ff0169421396bba5fe8d6221e9cbb617a5ae428d57a6c19e","line_count":19}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.UserDao:19","symbol_type":"method","name":"UserDao","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.UserDao","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":19,"end_line":22,"source":"@Autowired\n    public UserDao(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"UserDao","method_name":"UserDao","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"89269fdffd38d41d8ff94294c23e6cf510b4a500f2ffb293a6da16262e8a097d","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.getCurrentSession:24","symbol_type":"method","name":"getCurrentSession","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.getCurrentSession","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":24,"end_line":26,"source":"private Session getCurrentSession() {\n        return sessionFactory.getCurrentSession();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserDao","method_name":"getCurrentSession","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"13abf2156a7d0b0290c855d5257a59375a1e4625b385bc533c5d5e986118ba80","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.save:28","symbol_type":"method","name":"save","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.save","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":28,"end_line":31,"source":"public User save(User user) {\n        getCurrentSession().save(user);\n        return user;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserDao","method_name":"save","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"feb0b168bbfe9acd5f00b47f37a8d9af2c8fc84fd7886bd6278a1cc5cb0e8aaf","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.findById:33","symbol_type":"method","name":"findById","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.findById","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":33,"end_line":36,"source":"public Optional<User> findById(Long id) {\n        User user = getCurrentSession().get(User.class, id);\n        return Optional.ofNullable(user);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserDao","method_name":"findById","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"8eebb5916fc14c1cc5cd30ee9a50422ad6784a1d3284f4256fafecbf1161e0cb","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.update:38","symbol_type":"method","name":"update","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.update","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":38,"end_line":41,"source":"public User update(User user) {\n        getCurrentSession().update(user);\n        return user;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserDao","method_name":"update","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"af0c7005f412719b11dcd53565a96e3e4c0eb8a8bdbc6f1bc495b36e3a3303b2","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.findByEmail:43","symbol_type":"method","name":"findByEmail","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.findByEmail","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":43,"end_line":49,"source":"public Optional<User> findByEmail(String email) {\n        Query<User> query = getCurrentSession()\n                .createQuery(\"FROM User WHERE email = :email\", User.class);\n        query.setParameter(\"email\", email);\n        List<User> users = query.getResultList();\n        return users.isEmpty() ? Optional.empty() : Optional.of(users.get(0));\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserDao","method_name":"findByEmail","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"d9ecadf8120b1a491fe88bbb291f1ed2edd2ac7729fb263e4889dc5722242a5b","line_count":7}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.findByUsername:51","symbol_type":"method","name":"findByUsername","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.findByUsername","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":51,"end_line":57,"source":"public Optional<User> findByUsername(String username) {\n        Query<User> query = getCurrentSession()\n                .createQuery(\"FROM User WHERE username = :username\", User.class);\n        query.setParameter(\"username\", username);\n        List<User> users = query.getResultList();\n        return users.isEmpty() ? Optional.empty() : Optional.of(users.get(0));\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserDao","method_name":"findByUsername","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"78262dacf62e6744338458c6ebe96626e47a35c8953ba60c296588e9a8756645","line_count":7}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.existsByEmail:59","symbol_type":"method","name":"existsByEmail","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.existsByEmail","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":59,"end_line":64,"source":"public boolean existsByEmail(String email) {\n        Query<Long> query = getCurrentSession()\n                .createQuery(\"SELECT COUNT(u) FROM User u WHERE u.email = :email\", Long.class);\n        query.setParameter(\"email\", email);\n        return query.getSingleResult() > 0;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserDao","method_name":"existsByEmail","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"06855ca7406cd802fafa7d3cbc1e2847737ef801c1b13998117c95cfe87c15a0","line_count":6}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java:com.example.shoppingapplicationbeckend.dao.UserDao.existsByUsername:66","symbol_type":"method","name":"existsByUsername","qualified_name":"com.example.shoppingapplicationbeckend.dao.UserDao.existsByUsername","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dao/UserDao.java","start_line":66,"end_line":71,"source":"public boolean existsByUsername(String username) {\n        Query<Long> query = getCurrentSession()\n                .createQuery(\"SELECT COUNT(u) FROM User u WHERE u.username = :username\", Long.class);\n        query.setParameter(\"username\", username);\n        return query.getSingleResult() > 0;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserDao","method_name":"existsByUsername","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"854a8d3f13eb9b4646c5976bb91babc2b7e6206b27fdbe1c67ca2483d8fcc3cf","line_count":6}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java:com.example.shoppingapplicationbeckend.dto.ApiResponse.success:30","symbol_type":"method","name":"success","qualified_name":"com.example.shoppingapplicationbeckend.dto.ApiResponse.success","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java","start_line":30,"end_line":35,"source":"public static <T> ApiResponse<T> success(T data) {\n        ApiResponse<T> response = new ApiResponse<T>();\n        response.success = true;\n        response.data = data;\n        return response;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiResponse","method_name":"success","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b214e5a3dbdd62d3684abd3d78f6a12e96a302f6801f0e28f31f1819baed80e5","line_count":6}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java:com.example.shoppingapplicationbeckend.dto.ApiResponse.success:37","symbol_type":"method","name":"success","qualified_name":"com.example.shoppingapplicationbeckend.dto.ApiResponse.success","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java","start_line":37,"end_line":43,"source":"public static <T> ApiResponse<T> success(String message, T data) {\n        ApiResponse<T> response = new ApiResponse<T>();\n        response.success = true;\n        response.message = message;\n        response.data = data;\n        return response;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiResponse","method_name":"success","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"c8bafdb15bac12cf364a95b9bdd64d7d9e448bb63bd128275c16482c4083d2f5","line_count":7}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java:com.example.shoppingapplicationbeckend.dto.ApiResponse.success:45","symbol_type":"method","name":"success","qualified_name":"com.example.shoppingapplicationbeckend.dto.ApiResponse.success","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java","start_line":45,"end_line":50,"source":"public static <T> ApiResponse<T> success(String message) {\n        ApiResponse<T> response = new ApiResponse<T>();\n        response.success = true;\n        response.message = message;\n        return response;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiResponse","method_name":"success","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"02da95410a1ca0fc9b9b620a0c644c3f4ab04db85d87e9bc324fbe486d50e0ec","line_count":6}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java:com.example.shoppingapplicationbeckend.dto.ApiResponse.error:52","symbol_type":"method","name":"error","qualified_name":"com.example.shoppingapplicationbeckend.dto.ApiResponse.error","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java","start_line":52,"end_line":57,"source":"public static <T> ApiResponse<T> error(String error) {\n        ApiResponse<T> response = new ApiResponse<T>();\n        response.success = false;\n        response.error = error;\n        return response;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiResponse","method_name":"error","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"af886dbc62e4d7f1ff63ad5a1e86490cbecdfba945d162190e028bc88dedc974","line_count":6}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java:com.example.shoppingapplicationbeckend.dto.ApiResponse.error:59","symbol_type":"method","name":"error","qualified_name":"com.example.shoppingapplicationbeckend.dto.ApiResponse.error","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/ApiResponse.java","start_line":59,"end_line":65,"source":"public static <T> ApiResponse<T> error(String message, String error) {\n        ApiResponse<T> response = new ApiResponse<T>();\n        response.success = false;\n        response.message = message;\n        response.error = error;\n        return response;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiResponse","method_name":"error","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"2425ead0c260b3340200b73ffbd3e6e8f2ddbc30c786f83c23164bb73c81c2da","line_count":7}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/JwtResponse.java:com.example.shoppingapplicationbeckend.dto.JwtResponse.JwtResponse:15","symbol_type":"method","name":"JwtResponse","qualified_name":"com.example.shoppingapplicationbeckend.dto.JwtResponse.JwtResponse","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/JwtResponse.java","start_line":15,"end_line":21,"source":"public JwtResponse(String accessToken, Long id, String username, String email, Object authorities) {\n        this.token = accessToken;\n        this.id = id;\n        this.username = username;\n        this.email = email;\n        this.authorities = authorities;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JwtResponse","method_name":"JwtResponse","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"e29546292806b273c61a70ffa2e905af7ff8f21aef54851c0f0c99da892a2ea6","line_count":7}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/MessageResponse.java:com.example.shoppingapplicationbeckend.dto.MessageResponse.MessageResponse:6","symbol_type":"method","name":"MessageResponse","qualified_name":"com.example.shoppingapplicationbeckend.dto.MessageResponse.MessageResponse","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/MessageResponse.java","start_line":6,"end_line":6,"source":"public MessageResponse() {}","doc":null,"annotations":[],"metadata":{"class_name":"MessageResponse","method_name":"MessageResponse","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"99ded22e4678de5c110a8f0a1682b36bd54022501d9e9bb34138df9ed74f6202","line_count":1}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/MessageResponse.java:com.example.shoppingapplicationbeckend.dto.MessageResponse.MessageResponse:8","symbol_type":"method","name":"MessageResponse","qualified_name":"com.example.shoppingapplicationbeckend.dto.MessageResponse.MessageResponse","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/MessageResponse.java","start_line":8,"end_line":10,"source":"public MessageResponse(String message) {\n        this.message = message;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"MessageResponse","method_name":"MessageResponse","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b12eb13344d3ddd5dd395e39d5dc006fa369dd2d0429dc68e67c8fd1751ce127","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/MessageResponse.java:com.example.shoppingapplicationbeckend.dto.MessageResponse.getMessage:12","symbol_type":"method","name":"getMessage","qualified_name":"com.example.shoppingapplicationbeckend.dto.MessageResponse.getMessage","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/MessageResponse.java","start_line":12,"end_line":14,"source":"public String getMessage() {\n        return message;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"MessageResponse","method_name":"getMessage","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"83eeaf9e5e4329390ebceba008f740e0dfca9526a06d2c8d0c5b6d7955ac150f","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/MessageResponse.java:com.example.shoppingapplicationbeckend.dto.MessageResponse.setMessage:16","symbol_type":"method","name":"setMessage","qualified_name":"com.example.shoppingapplicationbeckend.dto.MessageResponse.setMessage","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/dto/MessageResponse.java","start_line":16,"end_line":18,"source":"public void setMessage(String message) {\n        this.message = message;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"MessageResponse","method_name":"setMessage","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"8f5b650215d8c984f7bdc62a95c492c23cd276e5a95e1b22e8c160d20ffc9c14","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/ApiException.java:com.example.shoppingapplicationbeckend.exception.ApiException.ApiException:12","symbol_type":"method","name":"ApiException","qualified_name":"com.example.shoppingapplicationbeckend.exception.ApiException.ApiException","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/ApiException.java","start_line":12,"end_line":16,"source":"public ApiException(HttpStatus status, String message) {\n        super(message);\n        this.status = status;\n        this.error = null;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiException","method_name":"ApiException","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"de2d94ba152bcb5fdb511016b194d8963226f11a9d486970645de4c47fbf7f64","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/ApiException.java:com.example.shoppingapplicationbeckend.exception.ApiException.ApiException:18","symbol_type":"method","name":"ApiException","qualified_name":"com.example.shoppingapplicationbeckend.exception.ApiException.ApiException","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/ApiException.java","start_line":18,"end_line":22,"source":"public ApiException(HttpStatus status, String message, String error) {\n        super(message);\n        this.status = status;\n        this.error = error;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiException","method_name":"ApiException","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b1ac9f7c1fc1642fa42666702780daf1d1159d189897a649276348b8e10d6ca5","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/ApiException.java:com.example.shoppingapplicationbeckend.exception.ApiException.getStatus:24","symbol_type":"method","name":"getStatus","qualified_name":"com.example.shoppingapplicationbeckend.exception.ApiException.getStatus","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/ApiException.java","start_line":24,"end_line":26,"source":"public HttpStatus getStatus() {\n        return status;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiException","method_name":"getStatus","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"76ae89c4a097d05250086abb6ea33a5a27b10e82601ef1e40598144ec8c28e23","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/ApiException.java:com.example.shoppingapplicationbeckend.exception.ApiException.getError:28","symbol_type":"method","name":"getError","qualified_name":"com.example.shoppingapplicationbeckend.exception.ApiException.getError","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/ApiException.java","start_line":28,"end_line":30,"source":"public String getError() {\n        return error;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ApiException","method_name":"getError","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"506a61a02e3ca44d61533907d2f213ed3be966932e33e4d9c4c6a93accca86ba","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.GlobalExceptionHandler:26","symbol_type":"method","name":"GlobalExceptionHandler","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.GlobalExceptionHandler","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":26,"end_line":29,"source":"@Autowired\n    public GlobalExceptionHandler(JsonViewSupport jsonViewSupport) {\n        this.jsonViewSupport = jsonViewSupport;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"GlobalExceptionHandler","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"6e9950eb5629669ee8d56312418c9c8630dd1ad9d084ff5f43e322ff2992db2f","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleValidation:31","symbol_type":"method","name":"handleValidation","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleValidation","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":31,"end_line":38,"source":"@ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity<?> handleValidation(MethodArgumentNotValidException ex) {\n        String details = ex.getBindingResult().getFieldErrors().stream()\n                .map(fe -> fe.getField() + \": \" + safeDefault(fe))\n                .collect(Collectors.joining(\", \"));\n        return jsonViewSupport.respond(HttpStatus.BAD_REQUEST,\n                ApiResponse.error(\"Validation failed\", details));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler(MethodArgumentNotValidException.class)"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleValidation","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"4d40ea0e868f31c6b93ffc4c644df0c8bf517f35cf9209e28f2be046c4f22d55","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.safeDefault:40","symbol_type":"method","name":"safeDefault","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.safeDefault","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":40,"end_line":43,"source":"private static String safeDefault(FieldError fe) {\n        String msg = fe.getDefaultMessage();\n        return msg == null ? \"invalid\" : msg;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"safeDefault","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"e65c7c20c576fed5c644f8cfad08490e8cfee1d4f1e689bf12d28bfb4e0b1904","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleConstraintViolation:45","symbol_type":"method","name":"handleConstraintViolation","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleConstraintViolation","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":45,"end_line":52,"source":"@ExceptionHandler(ConstraintViolationException.class)\n    public ResponseEntity<?> handleConstraintViolation(ConstraintViolationException ex) {\n        String details = ex.getConstraintViolations().stream()\n                .map(ConstraintViolation::getMessage)\n                .collect(Collectors.joining(\", \"));\n        return jsonViewSupport.respond(HttpStatus.BAD_REQUEST,\n                ApiResponse.error(\"Validation failed\", details));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler(ConstraintViolationException.class)"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleConstraintViolation","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"e9cd97c569cc633101c82ee74c90d8e3a5ba1e658a9bcf99a5e2c8ca833ec32c","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleBadRequest:54","symbol_type":"method","name":"handleBadRequest","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleBadRequest","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":54,"end_line":58,"source":"@ExceptionHandler({ MissingServletRequestParameterException.class, HttpMessageNotReadableException.class, IllegalArgumentException.class })\n    public ResponseEntity<?> handleBadRequest(Exception ex) {\n        return jsonViewSupport.respond(HttpStatus.BAD_REQUEST,\n                ApiResponse.error(\"Bad request\", ex.getMessage()));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler({ MissingServletRequestParameterException.class, HttpMessageNotReadableException.class, IllegalArgumentException.class })"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleBadRequest","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f9c49a47c88344bceb23187cfe1ebad4006ad15b08e31e95b8b58759d57db840","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleNotFound:60","symbol_type":"method","name":"handleNotFound","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleNotFound","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":60,"end_line":64,"source":"@ExceptionHandler(NoSuchElementException.class)\n    public ResponseEntity<?> handleNotFound(NoSuchElementException ex) {\n        return jsonViewSupport.respond(HttpStatus.NOT_FOUND,\n                ApiResponse.error(\"Not found\", ex.getMessage()));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler(NoSuchElementException.class)"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleNotFound","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"c173d8d420b2ee1721dbafc7b0aff230ca04c362125ff9f0a29a356cb24d5f77","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleAccessDenied:66","symbol_type":"method","name":"handleAccessDenied","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleAccessDenied","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":66,"end_line":70,"source":"@ExceptionHandler(AccessDeniedException.class)\n    public ResponseEntity<?> handleAccessDenied(AccessDeniedException ex) {\n        return jsonViewSupport.respond(HttpStatus.FORBIDDEN,\n                ApiResponse.error(\"Access denied\", ex.getMessage()));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler(AccessDeniedException.class)"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleAccessDenied","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"53f8a795bf20f830891d6420c5f8b121b155a0e13864efefcad60817d6c88107","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleInventory:72","symbol_type":"method","name":"handleInventory","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleInventory","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":72,"end_line":76,"source":"@ExceptionHandler(NotEnoughInventoryException.class)\n    public ResponseEntity<?> handleInventory(NotEnoughInventoryException ex) {\n        return jsonViewSupport.respond(HttpStatus.BAD_REQUEST,\n                ApiResponse.error(\"Inventory error\", ex.getMessage()));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler(NotEnoughInventoryException.class)"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleInventory","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"79091fc457e54d75350074063dbbea2fb86b83dac9cbb5f9c358b830da8bf4f4","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleApiException:78","symbol_type":"method","name":"handleApiException","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleApiException","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":78,"end_line":83,"source":"@ExceptionHandler(ApiException.class)\n    public ResponseEntity<?> handleApiException(ApiException ex) {\n        String err = ex.getError() == null ? ex.getMessage() : ex.getError();\n        return jsonViewSupport.respond(ex.getStatus(),\n                ApiResponse.error(ex.getMessage(), err));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler(ApiException.class)"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleApiException","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"df59e14372eae3fa6a8c21aee2ca5858ad8ea2b81ee0fd31bc1fc75c4b1b86d2","line_count":6}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleRuntime:85","symbol_type":"method","name":"handleRuntime","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleRuntime","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":85,"end_line":89,"source":"@ExceptionHandler(RuntimeException.class)\n    public ResponseEntity<?> handleRuntime(RuntimeException ex) {\n        return jsonViewSupport.respond(HttpStatus.BAD_REQUEST,\n                ApiResponse.error(\"error\", ex.getMessage()));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler(RuntimeException.class)"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleRuntime","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"eac299c27c026a13c2f2263725cdd5905cdaf8d220a273d49bcae72ef3e7a42c","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java:com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleGeneric:91","symbol_type":"method","name":"handleGeneric","qualified_name":"com.example.shoppingapplicationbeckend.exception.GlobalExceptionHandler.handleGeneric","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/GlobalExceptionHandler.java","start_line":91,"end_line":95,"source":"@ExceptionHandler(Exception.class)\n    public ResponseEntity<?> handleGeneric(Exception ex) {\n        return jsonViewSupport.respond(HttpStatus.INTERNAL_SERVER_ERROR,\n                ApiResponse.error(\"error\", ex.getMessage()));\n    }","doc":null,"annotations":[{"name":"ExceptionHandler","arguments":null,"raw_text":"@ExceptionHandler(Exception.class)"}],"metadata":{"class_name":"GlobalExceptionHandler","method_name":"handleGeneric","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"0a7d468d870ee9ddf164ec6531303cc204829f2ac951b10167d17bf49e3f337e","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/NotEnoughInventoryException.java:com.example.shoppingapplicationbeckend.exception.NotEnoughInventoryException.NotEnoughInventoryException:8","symbol_type":"method","name":"NotEnoughInventoryException","qualified_name":"com.example.shoppingapplicationbeckend.exception.NotEnoughInventoryException.NotEnoughInventoryException","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/NotEnoughInventoryException.java","start_line":8,"end_line":10,"source":"public NotEnoughInventoryException(String message) {\n        super(message);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"NotEnoughInventoryException","method_name":"NotEnoughInventoryException","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"70b60b8cd5664b6e72d0cd7a7ea0e7c31b03e3d7c4dbe4ee99844e631f3309c6","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/NotEnoughInventoryException.java:com.example.shoppingapplicationbeckend.exception.NotEnoughInventoryException.NotEnoughInventoryException:12","symbol_type":"method","name":"NotEnoughInventoryException","qualified_name":"com.example.shoppingapplicationbeckend.exception.NotEnoughInventoryException.NotEnoughInventoryException","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/NotEnoughInventoryException.java","start_line":12,"end_line":14,"source":"public NotEnoughInventoryException(String message, Throwable cause) {\n        super(message, cause);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"NotEnoughInventoryException","method_name":"NotEnoughInventoryException","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"24e3ff6c4fe334e07ae617549e6f52866d510e9be5b8ea0ffab2f181811cccbf","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/NotEnoughInventoryException.java:com.example.shoppingapplicationbeckend.exception.NotEnoughInventoryException.NotEnoughInventoryException:16","symbol_type":"method","name":"NotEnoughInventoryException","qualified_name":"com.example.shoppingapplicationbeckend.exception.NotEnoughInventoryException.NotEnoughInventoryException","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/exception/NotEnoughInventoryException.java","start_line":16,"end_line":19,"source":"public NotEnoughInventoryException(Long productId, int requestedQuantity, int availableStock) {\n        super(String.format(\"Not enough inventory for product ID %d: requested %d, available %d\", \n              productId, requestedQuantity, availableStock));\n    }","doc":null,"annotations":[],"metadata":{"class_name":"NotEnoughInventoryException","method_name":"NotEnoughInventoryException","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"427f47fe5d300aeea61d311a263c1ada9541096fb62e288354f58e94369481e3","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.Permission:21","symbol_type":"method","name":"Permission","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.Permission","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":21,"end_line":22,"source":"public Permission() {\n    }","doc":null,"annotations":[],"metadata":{"class_name":"Permission","method_name":"Permission","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"3f321fd775efa1d042600f6cf9ec469f6b58079c3de9fdffd64cdf9d66d89736","line_count":2}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.Permission:24","symbol_type":"method","name":"Permission","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.Permission","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":24,"end_line":27,"source":"public Permission(String value, Long userId) {\n        this.value = value;\n        this.userId = userId;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"Permission","method_name":"Permission","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"30e7c57cc1054fe547b3c7301b429c6b91186cbc451265b3d34b5fbb208eb472","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.getPermissionId:30","symbol_type":"method","name":"getPermissionId","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.getPermissionId","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":30,"end_line":32,"source":"public Long getPermissionId() {\n        return permissionId;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"Permission","method_name":"getPermissionId","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"cfa2810dda67a6c58fd3918f28e33fc4533ffc1723bb31df84a077fde0fb955b","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.setPermissionId:34","symbol_type":"method","name":"setPermissionId","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.setPermissionId","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":34,"end_line":36,"source":"public void setPermissionId(Long permissionId) {\n        this.permissionId = permissionId;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"Permission","method_name":"setPermissionId","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"a8de29dd9a541dcf8e240d195b70cdea666263c41c619f86f8740b35f36daba8","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.getValue:38","symbol_type":"method","name":"getValue","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.getValue","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":38,"end_line":40,"source":"public String getValue() {\n        return value;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"Permission","method_name":"getValue","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"44bbb6ffb1d8072be9d832642e4bb415f00e3ddddec495a323d3047dd069ae03","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.setValue:42","symbol_type":"method","name":"setValue","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.setValue","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":42,"end_line":44,"source":"public void setValue(String value) {\n        this.value = value;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"Permission","method_name":"setValue","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"483ccde94d7a545c8835983d757e123ac376d04ff7da3e2a566ad4c8de28bff2","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.getUserId:46","symbol_type":"method","name":"getUserId","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.getUserId","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":46,"end_line":48,"source":"public Long getUserId() {\n        return userId;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"Permission","method_name":"getUserId","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"d5d19ea98715e219735c354901b419661caf2710d8090d8abc696b1720f9e631","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.setUserId:50","symbol_type":"method","name":"setUserId","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.setUserId","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":50,"end_line":52,"source":"public void setUserId(Long userId) {\n        this.userId = userId;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"Permission","method_name":"setUserId","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b3e711c9e6f7d49abc18ffba2d2c92517dcb8d34a12422fea784cad4560ece0c","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java:com.example.shoppingapplicationbeckend.model.Permission.toString:54","symbol_type":"method","name":"toString","qualified_name":"com.example.shoppingapplicationbeckend.model.Permission.toString","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/model/Permission.java","start_line":54,"end_line":61,"source":"@Override\n    public String toString() {\n        return \"Permission{\" +\n                \"permissionId=\" + permissionId +\n                \", value='\" + value + '\\'' +\n                \", userId=\" + userId +\n                '}';\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"Permission","method_name":"toString","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"60fad8a0dd4d1957095617f23eea730d88e5a9f6cdd1f516faf8e4aa985666d3","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java:com.example.shoppingapplicationbeckend.security.SecurityUtil.SecurityUtil:12","symbol_type":"method","name":"SecurityUtil","qualified_name":"com.example.shoppingapplicationbeckend.security.SecurityUtil.SecurityUtil","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java","start_line":12,"end_line":13,"source":"private SecurityUtil() {\n    }","doc":null,"annotations":[],"metadata":{"class_name":"SecurityUtil","method_name":"SecurityUtil","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"654f2bc5eba02d03076b7522734b90f738e5a308c64be707c80a284e348103dc","line_count":2}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java:com.example.shoppingapplicationbeckend.security.SecurityUtil.getAuthentication:15","symbol_type":"method","name":"getAuthentication","qualified_name":"com.example.shoppingapplicationbeckend.security.SecurityUtil.getAuthentication","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java","start_line":15,"end_line":17,"source":"private static Authentication getAuthentication() {\n        return SecurityContextHolder.getContext().getAuthentication();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"SecurityUtil","method_name":"getAuthentication","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f1cef5a95e801cadba89ef170380751e84cbc6e56159ed93836f79d73518a19c","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java:com.example.shoppingapplicationbeckend.security.SecurityUtil.getCurrentUserId:19","symbol_type":"method","name":"getCurrentUserId","qualified_name":"com.example.shoppingapplicationbeckend.security.SecurityUtil.getCurrentUserId","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java","start_line":19,"end_line":30,"source":"public static Long getCurrentUserId() {\n        Authentication authentication = getAuthentication();\n        if (!isAuthenticated(authentication)) {\n            return null;\n        }\n\n        Object principal = authentication.getPrincipal();\n        if (principal instanceof UserPrincipal) {\n            return ((UserPrincipal) principal).getId();\n        }\n        return null;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"SecurityUtil","method_name":"getCurrentUserId","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"701a17b986cc6db1c67228af5a5c76b1e4612864b359a29f180f963a77ba627d","line_count":12}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java:com.example.shoppingapplicationbeckend.security.SecurityUtil.isAdmin:32","symbol_type":"method","name":"isAdmin","qualified_name":"com.example.shoppingapplicationbeckend.security.SecurityUtil.isAdmin","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java","start_line":32,"end_line":34,"source":"public static boolean isAdmin() {\n        return hasRole(ROLE_ADMIN);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"SecurityUtil","method_name":"isAdmin","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"032e979ad2cb68458c13cb4be539a19df858e74c3d4fa73697529d092f8c476a","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java:com.example.shoppingapplicationbeckend.security.SecurityUtil.hasRole:36","symbol_type":"method","name":"hasRole","qualified_name":"com.example.shoppingapplicationbeckend.security.SecurityUtil.hasRole","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java","start_line":36,"end_line":48,"source":"private static boolean hasRole(String role) {\n        Authentication authentication = getAuthentication();\n        if (!isAuthenticated(authentication) || authentication.getAuthorities() == null) {\n            return false;\n        }\n\n        for (GrantedAuthority authority : authentication.getAuthorities()) {\n            if (role.equals(authority.getAuthority())) {\n                return true;\n            }\n        }\n        return false;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"SecurityUtil","method_name":"hasRole","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f6b7839e366f95d68ccd969db4f75569443e27531ff59cb8a21c54d18d48b1e5","line_count":13}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java:com.example.shoppingapplicationbeckend.security.SecurityUtil.isAuthenticated:50","symbol_type":"method","name":"isAuthenticated","qualified_name":"com.example.shoppingapplicationbeckend.security.SecurityUtil.isAuthenticated","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/SecurityUtil.java","start_line":50,"end_line":52,"source":"private static boolean isAuthenticated(Authentication authentication) {\n        return authentication != null && authentication.isAuthenticated();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"SecurityUtil","method_name":"isAuthenticated","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"fa3eae68c8e5f6fdf04f7ee841ec748b242e0a421c2dad0ffcca67cd4bc7033e","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java:com.example.shoppingapplicationbeckend.security.WebSecurityConfig.authenticationJwtTokenFilter:32","symbol_type":"method","name":"authenticationJwtTokenFilter","qualified_name":"com.example.shoppingapplicationbeckend.security.WebSecurityConfig.authenticationJwtTokenFilter","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java","start_line":32,"end_line":35,"source":"@Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }","doc":null,"annotations":[{"name":"Bean","arguments":null,"raw_text":"@Bean"}],"metadata":{"class_name":"WebSecurityConfig","method_name":"authenticationJwtTokenFilter","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"59d5e6677e77e5fd4348cd13fa84a1203fa966c3df99cf6c04f3707fc9d05f22","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java:com.example.shoppingapplicationbeckend.security.WebSecurityConfig.configure:37","symbol_type":"method","name":"configure","qualified_name":"com.example.shoppingapplicationbeckend.security.WebSecurityConfig.configure","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java","start_line":37,"end_line":40,"source":"@Override\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"WebSecurityConfig","method_name":"configure","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f960306947adeaf82715a770a6da8914997029592bf9f6c128331cc9728c567a","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java:com.example.shoppingapplicationbeckend.security.WebSecurityConfig.authenticationManagerBean:42","symbol_type":"method","name":"authenticationManagerBean","qualified_name":"com.example.shoppingapplicationbeckend.security.WebSecurityConfig.authenticationManagerBean","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java","start_line":42,"end_line":46,"source":"@Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }","doc":null,"annotations":[{"name":"Bean","arguments":null,"raw_text":"@Bean"},{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"WebSecurityConfig","method_name":"authenticationManagerBean","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"db14b279c4bb464bf87c273decee4d9841974fce6680c02041c8eae374cbf157","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java:com.example.shoppingapplicationbeckend.security.WebSecurityConfig.passwordEncoder:48","symbol_type":"method","name":"passwordEncoder","qualified_name":"com.example.shoppingapplicationbeckend.security.WebSecurityConfig.passwordEncoder","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java","start_line":48,"end_line":52,"source":"@Bean\n    public PasswordEncoder passwordEncoder() {\n        // TODO: Replace with BCryptPasswordEncoder for production\n        return org.springframework.security.crypto.password.NoOpPasswordEncoder.getInstance();\n    }","doc":null,"annotations":[{"name":"Bean","arguments":null,"raw_text":"@Bean"}],"metadata":{"class_name":"WebSecurityConfig","method_name":"passwordEncoder","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"573bcde7cee941bd8b7402e35bebd27d4f4f3214086bfa73333a7d6428f24764","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java:com.example.shoppingapplicationbeckend.security.WebSecurityConfig.configure:54","symbol_type":"method","name":"configure","qualified_name":"com.example.shoppingapplicationbeckend.security.WebSecurityConfig.configure","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/WebSecurityConfig.java","start_line":54,"end_line":76,"source":"@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n            .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeRequests()\n                .antMatchers(\"/signup\").permitAll()\n                .antMatchers(\"/login\").permitAll()\n                .antMatchers(HttpMethod.PATCH, \"/products/*\").hasRole(\"ADMIN\")\n                .antMatchers(\"/products/all\").hasAnyRole(\"USER\", \"ADMIN\")\n                .antMatchers(\"/products/*\").hasAnyRole(\"USER\", \"ADMIN\") \n                .antMatchers(\"/products\").hasRole(\"ADMIN\") // POST - admin only\n                .antMatchers(\"/products/frequent/**\").hasRole(\"USER\")\n                .antMatchers(\"/products/recent/**\").hasRole(\"USER\")\n                .antMatchers(\"/products/profit/**\").hasRole(\"ADMIN\")\n                .antMatchers(\"/products/popular/**\").hasRole(\"ADMIN\")\n                .antMatchers(\"/products/sale_total\").hasRole(\"ADMIN\")\n                .antMatchers(\"/orders/**\").hasAnyRole(\"USER\", \"ADMIN\")\n                .antMatchers(\"/watchlist/**\").hasAnyRole(\"USER\", \"ADMIN\")\n                .anyRequest().authenticated();\n\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"WebSecurityConfig","method_name":"configure","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"a8bc98c5251f27858a8a36246b19ebb7de07e972bb6349be22219babdea80f62","line_count":23}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/AuthEntryPointJwt.java:com.example.shoppingapplicationbeckend.security.jwt.AuthEntryPointJwt.commence:19","symbol_type":"method","name":"commence","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.AuthEntryPointJwt.commence","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/AuthEntryPointJwt.java","start_line":19,"end_line":27,"source":"@Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n                        AuthenticationException authException) throws IOException, ServletException {\n        logger.error(\"Unauthorized error: {}\", authException.getMessage());\n        \n        response.setContentType(\"application/json\");\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n        response.getWriter().write(\"{\\\"error\\\":\\\"Unauthorized\\\",\\\"message\\\":\\\"\" + authException.getMessage() + \"\\\"}\");\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"AuthEntryPointJwt","method_name":"commence","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"d057ad1a59477a44dfbd52dc95a92da6bddb23d8b4b2fa16cf6ad2d84d5cd5a6","line_count":9}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/AuthTokenFilter.java:com.example.shoppingapplicationbeckend.security.jwt.AuthTokenFilter.doFilterInternal:30","symbol_type":"method","name":"doFilterInternal","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.AuthTokenFilter.doFilterInternal","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/AuthTokenFilter.java","start_line":30,"end_line":52,"source":"@Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, \n                                  FilterChain filterChain) throws ServletException, IOException {\n        try {\n            String jwt = parseJwt(request);\n            if (jwt != null && jwtUtils.validateJwtToken(jwt)) {\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n                UsernamePasswordAuthenticationToken authentication =\n                        new UsernamePasswordAuthenticationToken(userDetails,\n                                                              null,\n                                                              userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            logger.error(\"Cannot set user authentication: {}\", e.getMessage());\n        }\n\n        filterChain.doFilter(request, response);\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"AuthTokenFilter","method_name":"doFilterInternal","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"2889cbef19485e317ac3c84a18dbeed5becb991960eea8ddf52cdd101ac50a12","line_count":23}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/AuthTokenFilter.java:com.example.shoppingapplicationbeckend.security.jwt.AuthTokenFilter.parseJwt:54","symbol_type":"method","name":"parseJwt","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.AuthTokenFilter.parseJwt","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/AuthTokenFilter.java","start_line":54,"end_line":62,"source":"private String parseJwt(HttpServletRequest request) {\n        String headerAuth = request.getHeader(\"Authorization\");\n\n        if (StringUtils.hasText(headerAuth) && headerAuth.startsWith(\"Bearer \")) {\n            return headerAuth.substring(7);\n        }\n\n        return null;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"AuthTokenFilter","method_name":"parseJwt","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"07ec2fc128e11ba29cc65a2f768343dae5da62ead1e2d0cd9e7c544cf067427b","line_count":9}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/JwtUtils.java:com.example.shoppingapplicationbeckend.security.jwt.JwtUtils.init:27","symbol_type":"method","name":"init","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.JwtUtils.init","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/JwtUtils.java","start_line":27,"end_line":31,"source":"@PostConstruct\n    public void init() {\n        // Create a secure key from the secret\n        this.key = Keys.hmacShaKeyFor(jwtSecret.getBytes());\n    }","doc":null,"annotations":[{"name":"PostConstruct","arguments":null,"raw_text":"@PostConstruct"}],"metadata":{"class_name":"JwtUtils","method_name":"init","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"093158c3d4b221364f9188ea7b7f1e09f5d0383e1fb75c995d6de58e8bb76010","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/JwtUtils.java:com.example.shoppingapplicationbeckend.security.jwt.JwtUtils.generateJwtToken:33","symbol_type":"method","name":"generateJwtToken","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.JwtUtils.generateJwtToken","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/JwtUtils.java","start_line":33,"end_line":42,"source":"public String generateJwtToken(Authentication authentication) {\n        UserPrincipal userPrincipal = (UserPrincipal) authentication.getPrincipal();\n\n        return Jwts.builder()\n                .setSubject((userPrincipal.getUsername()))\n                .setIssuedAt(new Date())\n                // .setExpiration(new Date((new Date()).getTime() + jwtExpirationMs))\n                .signWith(key, SignatureAlgorithm.HS512)\n                .compact();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JwtUtils","method_name":"generateJwtToken","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f325ae5fd406f1a15d4f4cfe4823859a960f41235d77b2191a19262998aa1589","line_count":10}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/JwtUtils.java:com.example.shoppingapplicationbeckend.security.jwt.JwtUtils.getUserNameFromJwtToken:45","symbol_type":"method","name":"getUserNameFromJwtToken","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.JwtUtils.getUserNameFromJwtToken","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/JwtUtils.java","start_line":45,"end_line":52,"source":"public String getUserNameFromJwtToken(String token) {\n        return Jwts.parserBuilder()\n                .setSigningKey(key)\n                .build()\n                .parseClaimsJws(token)\n                .getBody()\n                .getSubject();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JwtUtils","method_name":"getUserNameFromJwtToken","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"64400cd7f8037d5d617e8709303d845baabc741b68ca78b76291ce9d2266246c","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/JwtUtils.java:com.example.shoppingapplicationbeckend.security.jwt.JwtUtils.validateJwtToken:54","symbol_type":"method","name":"validateJwtToken","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.JwtUtils.validateJwtToken","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/JwtUtils.java","start_line":54,"end_line":69,"source":"public boolean validateJwtToken(String authToken) {\n        try {\n            Jwts.parserBuilder().setSigningKey(key).build().parseClaimsJws(authToken);\n            return true;\n        } catch (MalformedJwtException e) {\n            logger.error(\"Invalid JWT token: {}\", e.getMessage());\n        } catch (ExpiredJwtException e) {\n            logger.error(\"JWT token is expired: {}\", e.getMessage());\n        } catch (UnsupportedJwtException e) {\n            logger.error(\"JWT token is unsupported: {}\", e.getMessage());\n        } catch (IllegalArgumentException e) {\n            logger.error(\"JWT claims string is empty: {}\", e.getMessage());\n        }\n\n        return false;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JwtUtils","method_name":"validateJwtToken","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b8a93be7c99eadc2b700ea1e708ac7d8b8a3ac97c155a98544b35533d81b170d","line_count":16}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.UserPrincipal:22","symbol_type":"method","name":"UserPrincipal","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.UserPrincipal","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":22,"end_line":29,"source":"public UserPrincipal(Long id, String username, String email, String password,\n                        Collection<? extends GrantedAuthority> authorities) {\n        this.id = id;\n        this.username = username;\n        this.email = email;\n        this.password = password;\n        this.authorities = authorities;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserPrincipal","method_name":"UserPrincipal","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"12362319041f2b5023ff49922a7e4847525002352a51e93c114d6df47cbbacb5","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.create:31","symbol_type":"method","name":"create","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.create","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":31,"end_line":44,"source":"public static UserPrincipal create(User user, List<Permission> permissions) {\n        // Convert permissions to authorities\n        List<GrantedAuthority> authorities = permissions.stream()\n            .map(permission -> new SimpleGrantedAuthority(permission.getValue()))\n            .collect(Collectors.toList());\n\n        return new UserPrincipal(\n            user.getUserId(),\n            user.getUsername(),\n            user.getEmail(),\n            user.getPassword(),\n            authorities\n        );\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserPrincipal","method_name":"create","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"9e6fae893d61b578242b0a2a22665537e7ca67cb86b6ac618d6e4cf9fe14dd86","line_count":14}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getId:46","symbol_type":"method","name":"getId","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getId","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":46,"end_line":48,"source":"public Long getId() {\n        return id;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserPrincipal","method_name":"getId","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"c4a72c85c4240369eca4293afc9d660e7ded64af708c2234f5a79f755708fbf0","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getEmail:50","symbol_type":"method","name":"getEmail","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getEmail","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":50,"end_line":52,"source":"public String getEmail() {\n        return email;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserPrincipal","method_name":"getEmail","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"698e3435a68f38f5854e13ac904e2ea29a22c1b47db4df4ab5dc4607238dff54","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getUsername:54","symbol_type":"method","name":"getUsername","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getUsername","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":54,"end_line":57,"source":"@Override\n    public String getUsername() {\n        return username;\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"getUsername","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"e281ceefe39e12ace7e3215b38bc60dd4bd2a80fa64651872adc3916f25773f4","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getPassword:59","symbol_type":"method","name":"getPassword","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getPassword","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":59,"end_line":62,"source":"@Override\n    public String getPassword() {\n        return password;\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"getPassword","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b31e2c8833bf9aa988657b4ad8ada7db110198529e1f146c148bd5fccfc8e06d","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getAuthorities:64","symbol_type":"method","name":"getAuthorities","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.getAuthorities","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":64,"end_line":67,"source":"@Override\n    public Collection<? extends GrantedAuthority> getAuthorities() {\n        return authorities;\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"getAuthorities","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"eebe4838131872691d7d21bf05c27e945ccec1f746d0ec33e20b3c0b2032b4f6","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.isAccountNonExpired:69","symbol_type":"method","name":"isAccountNonExpired","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.isAccountNonExpired","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":69,"end_line":72,"source":"@Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"isAccountNonExpired","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"83d6a1b2e82723135ff77d601b93324990c25de40b1d7f7e61125c6069373a49","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.isAccountNonLocked:74","symbol_type":"method","name":"isAccountNonLocked","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.isAccountNonLocked","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":74,"end_line":77,"source":"@Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"isAccountNonLocked","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"26d9d020fc27c4f6a18e4d7c261aa4edcccb56de0885e2646a781aa07e704362","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.isCredentialsNonExpired:79","symbol_type":"method","name":"isCredentialsNonExpired","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.isCredentialsNonExpired","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":79,"end_line":82,"source":"@Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"isCredentialsNonExpired","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f6921ed995f367b90cb1921733881c3c794303ca8b58ef6cd594e1bce3ca2b5d","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.isEnabled:84","symbol_type":"method","name":"isEnabled","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.isEnabled","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":84,"end_line":87,"source":"@Override\n    public boolean isEnabled() {\n        return true;\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"isEnabled","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"82ab9d42904a73dc62785e49a8d8c7e0d7c6fbedff21723265e3aacb2bb9a305","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.equals:89","symbol_type":"method","name":"equals","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.equals","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":89,"end_line":96,"source":"@Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        \n        UserPrincipal that = (UserPrincipal) o;\n        return id.equals(that.id);\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"equals","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"dc099607d82b6901bcea05cbcc8d2d7373468e59ae700647fbc70cb1b9c3fb54","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java:com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.hashCode:98","symbol_type":"method","name":"hashCode","qualified_name":"com.example.shoppingapplicationbeckend.security.jwt.UserPrincipal.hashCode","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/jwt/UserPrincipal.java","start_line":98,"end_line":101,"source":"@Override\n    public int hashCode() {\n        return id.hashCode();\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"}],"metadata":{"class_name":"UserPrincipal","method_name":"hashCode","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"087eb2afba723a5ef0c15271a4907db6466fea69d4be862e956f0423a5d3df05","line_count":4}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/services/UserDetailsServiceImpl.java:com.example.shoppingapplicationbeckend.security.services.UserDetailsServiceImpl.loadUserByUsername:27","symbol_type":"method","name":"loadUserByUsername","qualified_name":"com.example.shoppingapplicationbeckend.security.services.UserDetailsServiceImpl.loadUserByUsername","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/security/services/UserDetailsServiceImpl.java","start_line":27,"end_line":46,"source":"@Override\n    @Transactional\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        Optional<User> userOpt = userDao.findByUsername(username);\n        \n        if (!userOpt.isPresent()) {\n            userOpt = userDao.findByEmail(username);\n        }\n        \n        if (!userOpt.isPresent()) {\n            throw new UsernameNotFoundException(\"User Not Found with username: \" + username);\n        }\n        \n        User user = userOpt.get();\n        \n        // Load user permissions\n        List<Permission> permissions = permissionDao.findByUserId(user.getUserId());\n\n        return UserPrincipal.create(user, permissions);\n    }","doc":null,"annotations":[{"name":"Override","arguments":null,"raw_text":"@Override"},{"name":"Transactional","arguments":null,"raw_text":"@Transactional"}],"metadata":{"class_name":"UserDetailsServiceImpl","method_name":"loadUserByUsername","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"28b673a96c6253bf83c3947b01791c30669a9c47c15d0526cd1ebc26d1229af8","line_count":20}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java:com.example.shoppingapplicationbeckend.service.OrderService.OrderService:34","symbol_type":"method","name":"OrderService","qualified_name":"com.example.shoppingapplicationbeckend.service.OrderService.OrderService","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java","start_line":34,"end_line":41,"source":"@Autowired\n    public OrderService(OrderDao orderDao, OrderItemDao orderItemDao, \n                       UserDao userDao, ProductDao productDao) {\n        this.orderDao = orderDao;\n        this.orderItemDao = orderItemDao;\n        this.userDao = userDao;\n        this.productDao = productDao;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"OrderService","method_name":"OrderService","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"64c6fdb527c08fcf8689b6072c4f63281994079655ecd8ff257f7afbc01adba4","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java:com.example.shoppingapplicationbeckend.service.OrderService.createOrderWithItems:44","symbol_type":"method","name":"createOrderWithItems","qualified_name":"com.example.shoppingapplicationbeckend.service.OrderService.createOrderWithItems","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java","start_line":44,"end_line":95,"source":"public Order createOrderWithItems(Long userId, List<OrderItemRequest> items) {\n        // Validate user exists\n        Optional<User> userOpt = userDao.findById(userId);\n        if (!userOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"User not found with id: \" + userId);\n        }\n\n        // Validate all products exist and have sufficient stock BEFORE creating order\n        for (OrderItemRequest item : items) {\n            Optional<Product> productOpt = productDao.findById(item.getProductId());\n            if (!productOpt.isPresent()) {\n                throw new ApiException(HttpStatus.NOT_FOUND, \"Product not found with id: \" + item.getProductId());\n            }\n\n            Product product = productOpt.get();\n            if (product.getQuantity() < item.getQuantity()) {\n                throw new NotEnoughInventoryException(\n                    item.getProductId(), \n                    item.getQuantity(), \n                    product.getQuantity()\n                );\n            }\n        }\n\n        User user = userOpt.get();\n        Order order = new Order();\n        order.setUser(user);\n        order.setDatePlaced(Instant.now());\n        order.setOrderStatus(\"PROCESSING\");\n        Order savedOrder = orderDao.save(order);\n\n        // Add items\n        for (OrderItemRequest item : items) {\n            Product product = productDao.findById(item.getProductId()).get();\n            \n            // Create order item with price snapshots\n            OrderItem orderItem = new OrderItem();\n            orderItem.setOrder(savedOrder);\n            orderItem.setProduct(product);\n            orderItem.setQuantity(item.getQuantity());\n            orderItem.setWholesalePrice(product.getWholesalePrice());\n            orderItem.setPurchasedPrice(product.getRetailPrice());\n            // orderItem.setTotalPrice(item.getQuantity() * product.getRetailPrice());\n            orderItemDao.save(orderItem);\n\n            // Decrement product stock\n            product.setQuantity(product.getQuantity() - item.getQuantity());\n            productDao.update(product);\n        }\n\n        return savedOrder;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderService","method_name":"createOrderWithItems","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"e1a5322f9eb87a5b0f875bbf80f5c5cb5392ef925adfb1b0f1fbe763037361dd","line_count":52}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java:com.example.shoppingapplicationbeckend.service.OrderService.createOrderForCurrentUser:97","symbol_type":"method","name":"createOrderForCurrentUser","qualified_name":"com.example.shoppingapplicationbeckend.service.OrderService.createOrderForCurrentUser","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java","start_line":97,"end_line":103,"source":"public Order createOrderForCurrentUser(List<OrderItemRequest> items) {\n        Long currentUserId = SecurityUtil.getCurrentUserId();\n        if (currentUserId == null) {\n            throw new AccessDeniedException(\"User not authenticated\");\n        }\n        return createOrderWithItems(currentUserId, items);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderService","method_name":"createOrderForCurrentUser","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"ae4381ced59df6b43bdfffe2b45624a91d7346004a0a043ffefe9b49b2391b07","line_count":7}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java:com.example.shoppingapplicationbeckend.service.OrderService.getOrderById:106","symbol_type":"method","name":"getOrderById","qualified_name":"com.example.shoppingapplicationbeckend.service.OrderService.getOrderById","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java","start_line":106,"end_line":125,"source":"public Optional<Order> getOrderById(Long orderId) {\n        Long currentUserId = SecurityUtil.getCurrentUserId();\n        boolean isAdmin = SecurityUtil.isAdmin();\n        Optional<Order> orderOpt = orderDao.findById(orderId);\n\n        if (!orderOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"Order not found with id:\" + orderId);\n        }\n\n        Order order = orderOpt.get();\n        if (!isAdmin) {\n            User owner = order.getUser();\n            Long ownerId = owner != null ? owner.getUserId() : null;\n            if (ownerId == null || !ownerId.equals(currentUserId)) {\n                throw new AccessDeniedException(\"Limited Access\");\n            }\n        }\n\n        return orderOpt;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderService","method_name":"getOrderById","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"20916334cd5df25c97e7745fca2cd5a3002b72cbfefc3e53054c81a4ca5c2348","line_count":20}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java:com.example.shoppingapplicationbeckend.service.OrderService.getOrdersForCurrentUserContext:127","symbol_type":"method","name":"getOrdersForCurrentUserContext","qualified_name":"com.example.shoppingapplicationbeckend.service.OrderService.getOrdersForCurrentUserContext","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java","start_line":127,"end_line":142,"source":"public List<Order> getOrdersForCurrentUserContext() {\n        if (SecurityUtil.isAdmin()) {\n            return getAllOrders();\n        }\n\n        Long currentUserId = SecurityUtil.getCurrentUserId();\n        if (currentUserId == null) {\n            throw new AccessDeniedException(\"Access denied\");\n        }\n\n        Optional<User> userOpt = userDao.findById(currentUserId);\n        if (!userOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"User not found with id: \" + currentUserId);\n        }\n        return orderDao.findByUser(userOpt.get());\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderService","method_name":"getOrdersForCurrentUserContext","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"4b7e706ab27a0499da13905c14faf6796d3fd7ccc86ffbc399e3073e82b14e57","line_count":16}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java:com.example.shoppingapplicationbeckend.service.OrderService.getAllOrders:145","symbol_type":"method","name":"getAllOrders","qualified_name":"com.example.shoppingapplicationbeckend.service.OrderService.getAllOrders","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java","start_line":145,"end_line":147,"source":"public List<Order> getAllOrders() {\n        return orderDao.findAll();\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderService","method_name":"getAllOrders","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"70bed92125775389e021cbe750f2460c4a803fa90db55b6533c499080975d1df","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java:com.example.shoppingapplicationbeckend.service.OrderService.cancelOrder:150","symbol_type":"method","name":"cancelOrder","qualified_name":"com.example.shoppingapplicationbeckend.service.OrderService.cancelOrder","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java","start_line":150,"end_line":193,"source":"public Order cancelOrder(Long orderId) {\n        Long currentUserId = SecurityUtil.getCurrentUserId();\n        boolean isAdmin = SecurityUtil.isAdmin();\n        Optional<Order> orderOpt = orderDao.findById(orderId);\n        if (!orderOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"Order not found with id: \" + orderId);\n        }\n\n        Order order = orderOpt.get();\n        // If not admin, ensure the order belongs to the current user\n        if (!isAdmin) {\n            if (currentUserId == null || order.getUser() == null || order.getUser().getUserId() == null ||\n                !order.getUser().getUserId().equals(currentUserId)) {\n                throw new ApiException(HttpStatus.FORBIDDEN, \"You can only cancel your own orders\");\n            }\n        }\n        String currentStatus = order.getOrderStatus();\n\n        if (\"CANCELED\".equals(currentStatus)) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Order is already canceled\");\n        }\n        if (\"COMPLETED\".equals(currentStatus)) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Cannot cancel a completed order\");\n        }\n        if (!\"PROCESSING\".equals(currentStatus)) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Only processing orders can be canceled\");\n        }\n\n        // Restore product stock for each item in the order\n        List<OrderItem> items = order.getItems();\n        if (items != null) {\n            for (OrderItem item : items) {\n                Product product = item.getProduct();\n                if (product != null) {\n                    product.setQuantity(product.getQuantity() + item.getQuantity());\n                    productDao.update(product);\n                }\n            }\n        }\n\n        // Update order status to CANCELED\n        order.setOrderStatus(\"CANCELED\");\n        return orderDao.update(order);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"OrderService","method_name":"cancelOrder","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"4dce6a16c35cd193df78c2402a6eb76babf2763792d6ed6e5ed96cad46b8bd13","line_count":44}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java:com.example.shoppingapplicationbeckend.service.OrderService.completeOrder:196","symbol_type":"method","name":"completeOrder","qualified_name":"com.example.shoppingapplicationbeckend.service.OrderService.completeOrder","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/OrderService.java","start_line":196,"end_line":221,"source":"@Transactional\n    public Order completeOrder(Long orderId) {\n        Optional<Order> orderOpt = orderDao.findById(orderId);\n        if (!orderOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"Order not found with id: \" + orderId);\n        }\n\n        Order order = orderOpt.get();\n        String currentStatus = order.getOrderStatus();\n\n        if (\"CANCELED\".equals(currentStatus)) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Cannot complete a canceled order\");\n        }\n\n        if (\"COMPLETED\".equals(currentStatus)) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Order is already completed\");\n        }\n\n        if (!\"PROCESSING\".equals(currentStatus)) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Only processing orders can be completed\");\n        }\n\n        // Update order status to COMPLETED\n        order.setOrderStatus(\"COMPLETED\");\n        return orderDao.update(order);\n    }","doc":null,"annotations":[{"name":"Transactional","arguments":null,"raw_text":"@Transactional"}],"metadata":{"class_name":"OrderService","method_name":"completeOrder","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"dc1d5c557a6202fcd83fa53ad227059536cdbf0f143a2777b1653b9834cfbab5","line_count":26}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.ProductService:31","symbol_type":"method","name":"ProductService","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.ProductService","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":31,"end_line":35,"source":"@Autowired\n    public ProductService(ProductDao productDao, OrderItemDao orderItemDao) {\n        this.productDao = productDao;\n        this.orderItemDao = orderItemDao;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"ProductService","method_name":"ProductService","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"784fa921672a457993bc5e6ffc4e99ad17789affc58f3a226f5ff56d0a1fd384","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.createProduct:38","symbol_type":"method","name":"createProduct","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.createProduct","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":38,"end_line":63,"source":"public Product createProduct(String name, String description, Double retailPrice, \n                               Double wholesalePrice, Integer quantity) {\n        if (name == null || name.trim().isEmpty()) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Product name is required\");\n        }\n        if (retailPrice == null || retailPrice <= 0) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Valid retail price is required\");\n        }\n        if (wholesalePrice == null || wholesalePrice <= 0) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Valid wholesale price is required\");\n        }\n        if (quantity == null || quantity < 0) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Valid quantity is required\");\n        }\n        Product product = new Product();\n        product.setName(name);\n        product.setDescription(description);\n        product.setRetailPrice(retailPrice);\n        product.setWholesalePrice(wholesalePrice);\n        product.setQuantity(quantity);\n        Instant now = Instant.now();\n        product.setCreatedAt(now);\n        product.setUpdatedAt(now);\n\n        return productDao.save(product);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductService","method_name":"createProduct","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"a8d11184089574b7c269a1416b1dc93938ff39313c8f6163689f334bafa41f21","line_count":26}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.getProductById:66","symbol_type":"method","name":"getProductById","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.getProductById","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":66,"end_line":73,"source":"public Optional<Product> getProductById(Long productId) {\n        boolean isAdmin = SecurityUtil.isAdmin();\n        Optional<Product> productOpt= productDao.findById(productId);\n        if (!productOpt.isPresent()) throw new ApiException(HttpStatus.NOT_FOUND, \"Order not found with id:\" + productId);\n        Product product = productOpt.get();\n        if (!isAdmin && product.getQuantity() == 0) throw new ApiException(HttpStatus.FORBIDDEN, \"Limited Access with id\" + productId);\n        return productOpt;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductService","method_name":"getProductById","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"b7b09c586991edeff0ecf8ad6396d7134ccb95325bd9465093441ba4d793f038","line_count":8}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.updateProduct:76","symbol_type":"method","name":"updateProduct","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.updateProduct","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":76,"end_line":123,"source":"public Product updateProduct(Long productId, String name, String description, \n                               Double retailPrice, Double wholesalePrice, Integer quantity) {\n        Optional<Product> productOpt = productDao.findById(productId);\n        if (!productOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"Product not found with id: \" + productId);\n        }\n\n        Product product = productOpt.get();\n\n        if (name != null) {\n            if (name.trim().isEmpty()) {\n                throw new ApiException(HttpStatus.BAD_REQUEST, \"Product name cannot be empty\");\n            }\n            product.setName(name.trim());\n        }\n\n        if (description != null) {\n            product.setDescription(description);\n        }\n\n        if (retailPrice != null) {\n            if (retailPrice <= 0) {\n                throw new ApiException(HttpStatus.BAD_REQUEST, \"Retail price must be positive\");\n            }\n            product.setRetailPrice(retailPrice);\n        }\n\n        if (wholesalePrice != null) {\n            if (wholesalePrice <= 0) {\n                throw new ApiException(HttpStatus.BAD_REQUEST, \"Wholesale price must be positive\");\n            }\n            product.setWholesalePrice(wholesalePrice);\n        }\n\n        if (quantity != null) {\n            if (quantity < 0) {\n                throw new ApiException(HttpStatus.BAD_REQUEST, \"Quantity cannot be negative\");\n            }\n            product.setQuantity(quantity);\n        }\n\n        if (product.getRetailPrice() < product.getWholesalePrice()) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Retail price should be greater than or equal to wholesale price\");\n        }\n\n        product.setUpdatedAt(Instant.now());\n        return productDao.update(product);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductService","method_name":"updateProduct","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"6a0cc2e4d3c7f4bc0a9fbe88368c7bf73fdededda60821dcf6636e31813c3468","line_count":48}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.getAllProducts:126","symbol_type":"method","name":"getAllProducts","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.getAllProducts","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":126,"end_line":130,"source":"@Transactional(readOnly = true)\n    public List<Product> getAllProducts() {\n        boolean isAdmin = SecurityUtil.isAdmin();\n        return isAdmin?productDao.findAll(): productDao.findByQuantityGreaterThan(0);\n    }","doc":null,"annotations":[{"name":"Transactional","arguments":null,"raw_text":"@Transactional(readOnly = true)"}],"metadata":{"class_name":"ProductService","method_name":"getAllProducts","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"bb058de07493a8bc01d27d8d046ce2770efcc68ac6882c1282678204895cb881","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.getFrequentProductsForUser:132","symbol_type":"method","name":"getFrequentProductsForUser","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.getFrequentProductsForUser","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":132,"end_line":191,"source":"@Transactional(readOnly = true)\n    public List<ProductStatsInfo> getFrequentProductsForUser(Long userId, int limit) {\n        if (userId == null || limit <= 0) {\n            return Collections.emptyList();\n        }\n\n        List<OrderItem> orderItems = orderItemDao.findCompletedItemsByUserId(userId);\n        if (orderItems.isEmpty()) {\n            return Collections.emptyList();\n        }\n\n        Map<Long, Long> quantityByProductId = new HashMap<>();\n        Map<Long, Product> productById = new HashMap<>();\n        for (OrderItem item : orderItems) {\n            if (item == null) {\n                continue;\n            }\n            Product product = item.getProduct();\n            if (product == null) {\n                continue;\n            }\n            Long productId = product.getProductId();\n            if (productId == null) {\n                continue;\n            }\n            Integer itemQuantity = item.getQuantity();\n            if (itemQuantity == null || itemQuantity <= 0) {\n                continue;\n            }\n            quantityByProductId.merge(productId, itemQuantity.longValue(), Long::sum);\n            productById.putIfAbsent(productId, product);\n        }\n\n        if (quantityByProductId.isEmpty()) {\n            return Collections.emptyList();\n        }\n\n        List<Map.Entry<Long, Long>> entries = new ArrayList<>(quantityByProductId.entrySet());\n        entries.sort((left, right) -> {\n            int compareQuantity = Long.compare(right.getValue(), left.getValue());\n            if (compareQuantity != 0) {\n                return compareQuantity;\n            }\n            return Long.compare(left.getKey(), right.getKey());\n        });\n\n        List<ProductStatsInfo> frequentProducts = new ArrayList<>(Math.min(limit, entries.size()));\n        for (Map.Entry<Long, Long> entry : entries) {\n            if (frequentProducts.size() >= limit) {\n                break;\n            }\n            Product product = productById.get(entry.getKey());\n            product.setQuantity(quantityByProductId.get(product.getProductId()).intValue());\n            if (product != null) {\n                frequentProducts.add(new ProductStatsInfo(product, entry.getValue().toString()));\n            }\n        }\n\n        return frequentProducts;\n    }","doc":null,"annotations":[{"name":"Transactional","arguments":null,"raw_text":"@Transactional(readOnly = true)"}],"metadata":{"class_name":"ProductService","method_name":"getFrequentProductsForUser","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"da40885358a7f9f57033f75d06397a500e427cb86036369856a7359ccaf95248","line_count":60}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.getMostRecentlyPurchasedProductsForUser:193","symbol_type":"method","name":"getMostRecentlyPurchasedProductsForUser","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.getMostRecentlyPurchasedProductsForUser","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":193,"end_line":276,"source":"public List<ProductStatsInfo> getMostRecentlyPurchasedProductsForUser(int limit){\n        if (limit <= 0) {\n            return Collections.emptyList();\n        }\n\n        Long currentUserId = SecurityUtil.getCurrentUserId();\n        if (currentUserId == null) {\n            return Collections.emptyList();\n        }\n\n        List<OrderItem> orderItems = orderItemDao.findCompletedItemsByUserId(currentUserId);\n        if (orderItems.isEmpty()) {\n            return Collections.emptyList();\n        }\n\n        Map<Long, Instant> latestPurchaseByProductId = new HashMap<>();\n        Map<Long, Product> productById = new HashMap<>();\n        for (OrderItem item : orderItems) {\n            if (item == null) {\n                continue;\n            }\n\n            Product product = item.getProduct();\n            if (product == null) {\n                continue;\n            }\n\n            Long productId = product.getProductId();\n            if (productId == null) {\n                continue;\n            }\n\n            Order order = item.getOrder();\n            Instant orderDate = null;\n            if (order != null) {\n                Instant datePlaced = order.getDatePlaced();\n                Instant updatedAt = order.getUpdatedAt();\n                if (datePlaced != null) {\n                    orderDate = datePlaced;\n                }\n                if (updatedAt != null && (orderDate == null || updatedAt.isAfter(orderDate))) {\n                    orderDate = updatedAt;\n                }\n            }\n\n            if (orderDate == null) {\n                continue;\n            }\n\n            Instant currentLatest = latestPurchaseByProductId.get(productId);\n            if (currentLatest == null || orderDate.isAfter(currentLatest)) {\n                latestPurchaseByProductId.put(productId, orderDate);\n                productById.put(productId, product);\n            } else {\n                productById.putIfAbsent(productId, product);\n            }\n        }\n\n        if (latestPurchaseByProductId.isEmpty()) {\n            return Collections.emptyList();\n        }\n\n        List<Map.Entry<Long, Instant>> entries = new ArrayList<>(latestPurchaseByProductId.entrySet());\n        entries.sort((left, right) -> {\n            int compare = right.getValue().compareTo(left.getValue());\n            if (compare != 0) {\n                return compare;\n            }\n            return Long.compare(left.getKey(), right.getKey());\n        });\n\n        List<ProductStatsInfo> recentProducts = new ArrayList<>(Math.min(limit, entries.size()));\n        for (Map.Entry<Long, Instant> entry : entries) {\n            if (recentProducts.size() >= limit) {\n                break;\n            }\n            Product product = productById.get(entry.getKey());\n            if (product != null) {\n                recentProducts.add(new ProductStatsInfo(product, entry.getValue().toString()));\n            }\n        }\n\n        return recentProducts;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductService","method_name":"getMostRecentlyPurchasedProductsForUser","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"f461300f4d4a5d226460160a08390ada1a7257068f08669bc9984ed7399120e1","line_count":84}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.getMostProfitableProductsAdminWithProfit:278","symbol_type":"method","name":"getMostProfitableProductsAdminWithProfit","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.getMostProfitableProductsAdminWithProfit","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":278,"end_line":367,"source":"public List<ProductStatsInfo> getMostProfitableProductsAdminWithProfit(int limit) {\n        if (limit <= 0) {\n            return Collections.emptyList();\n        }\n\n        List<Product> products = productDao.findAll();\n        if (products.isEmpty()) {\n            return Collections.emptyList();\n        }\n\n        Map<Long, Double> profitByProductId = new HashMap<>();\n        Map<Long, Product> productById = new HashMap<>();\n\n        for (Product product : products) {\n            if (product == null) {\n                continue;\n            }\n\n            Long productId = product.getProductId();\n            if (productId == null) {\n                continue;\n            }\n\n            Double retailPrice = product.getRetailPrice();\n            if (retailPrice == null) {\n                continue;\n            }\n\n            List<OrderItem> orderItems = product.getOrderItems();\n            if (orderItems == null || orderItems.isEmpty()) {\n                continue;\n            }\n\n            for (OrderItem orderItem : orderItems) {\n                if (orderItem == null) {\n                    continue;\n                }\n\n                Order order = orderItem.getOrder();\n                if (order == null) {\n                    continue;\n                }\n\n                String status = order.getOrderStatus();\n                if (status == null || !\"COMPLETED\".equalsIgnoreCase(status)) {\n                    continue;\n                }\n\n                Integer quantity = orderItem.getQuantity();\n                if (quantity == null || quantity <= 0) {\n                    continue;\n                }\n\n                Double wholesalePrice = orderItem.getWholesalePrice();\n                if (wholesalePrice == null) {\n                    continue;\n                }\n\n                double profitContribution = (retailPrice - wholesalePrice) * quantity;\n                profitByProductId.merge(productId, profitContribution, Double::sum);\n                productById.putIfAbsent(productId, product);\n            }\n        }\n\n        if (profitByProductId.isEmpty()) {\n            return Collections.emptyList();\n        }\n\n        List<Map.Entry<Long, Double>> entries = new ArrayList<>(profitByProductId.entrySet());\n        entries.sort((left, right) -> {\n            int compare = Double.compare(right.getValue(), left.getValue());\n            if (compare != 0) {\n                return compare;\n            }\n            return Long.compare(left.getKey(), right.getKey());\n        });\n\n        List<ProductStatsInfo> result = new ArrayList<>(Math.min(limit, entries.size()));\n        for (Map.Entry<Long, Double> entry : entries) {\n            if (result.size() >= limit) {\n                break;\n            }\n            Product product = productById.get(entry.getKey());\n            if (product != null) {\n                result.add(new ProductStatsInfo(product, entry.getValue().toString()));\n            }\n        }\n\n        return result;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductService","method_name":"getMostProfitableProductsAdminWithProfit","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"ee36a2a00bf09785a7e158c401e6c42cca3651cbe892b29fbdb2bdef59ac84a4","line_count":90}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.getMostPopularProductsAdmin:369","symbol_type":"method","name":"getMostPopularProductsAdmin","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.getMostPopularProductsAdmin","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":369,"end_line":449,"source":"public List<ProductStatsInfo> getMostPopularProductsAdmin(int limit) {\n        if (limit <= 0) {\n            return Collections.emptyList();\n        }\n\n        List<Product> products = productDao.findAll();\n        if (products.isEmpty()) {\n            return Collections.emptyList();\n        }\n\n        Map<Long, Long> quantityByProductId = new HashMap<>();\n        Map<Long, Product> productById = new HashMap<>();\n\n        for (Product product : products) {\n            if (product == null) {\n                continue;\n            }\n\n            Long productId = product.getProductId();\n            if (productId == null) {\n                continue;\n            }\n\n            List<OrderItem> orderItems = product.getOrderItems();\n            if (orderItems == null || orderItems.isEmpty()) {\n                continue;\n            }\n\n            for (OrderItem orderItem : orderItems) {\n                if (orderItem == null) {\n                    continue;\n                }\n\n                Order order = orderItem.getOrder();\n                if (order == null) {\n                    continue;\n                }\n\n                String status = order.getOrderStatus();\n                if (status == null || !\"COMPLETED\".equalsIgnoreCase(status)) {\n                    continue;\n                }\n\n                Integer quantity = orderItem.getQuantity();\n                if (quantity == null || quantity <= 0) {\n                    continue;\n                }\n\n                quantityByProductId.merge(productId, quantity.longValue(), Long::sum);\n                productById.putIfAbsent(productId, product);\n            }\n        }\n\n        if (quantityByProductId.isEmpty()) {\n            return Collections.emptyList();\n        }\n\n        List<Map.Entry<Long, Long>> entries = new ArrayList<>(quantityByProductId.entrySet());\n        entries.sort((left, right) -> {\n            int compareQuantity = Long.compare(right.getValue(), left.getValue());\n            if (compareQuantity != 0) {\n                return compareQuantity;\n            }\n            return Long.compare(left.getKey(), right.getKey());\n        });\n\n        //List<Product> popularProducts = new ArrayList<>(Math.min(limit, entries.size()));\n        List<ProductStatsInfo> result = new ArrayList<>(Math.min(limit, entries.size()));\n        for (Map.Entry<Long, Long> entry : entries) {\n            if (result.size() >= limit) {\n                break;\n            }\n            Product product = productById.get(entry.getKey());\n            if (product != null) {\n                //popularProducts.add(product);\n                result.add(new ProductStatsInfo(product, Long.toString(entry.getValue())));\n            }\n        }\n\n        return result;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductService","method_name":"getMostPopularProductsAdmin","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"5eb200888ea8e9fc99c5ec2ffe0e5000dfdd10b2ff895b0cfe8511ac38610f94","line_count":81}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java:com.example.shoppingapplicationbeckend.service.ProductService.getProductsBySaleTotal:450","symbol_type":"method","name":"getProductsBySaleTotal","qualified_name":"com.example.shoppingapplicationbeckend.service.ProductService.getProductsBySaleTotal","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/ProductService.java","start_line":450,"end_line":505,"source":"public ProductStatsInfo getProductsBySaleTotal() {\n        List<Product> products = productDao.findAll();\n        if (products.isEmpty()) {\n            return null;\n        }\n\n        double totalSales = 0.0;\n        // boolean hasContributions = false;\n\n        for (Product product : products) {\n            if (product == null) {\n                continue;\n            }\n\n            List<OrderItem> orderItems = product.getOrderItems();\n            if (orderItems == null || orderItems.isEmpty()) {\n                continue;\n            }\n\n            for (OrderItem orderItem : orderItems) {\n                if (orderItem == null) {\n                    continue;\n                }\n\n                Order order = orderItem.getOrder();\n                if (order == null) {\n                    continue;\n                }\n\n                String status = order.getOrderStatus();\n                if (status == null || !\"COMPLETED\".equalsIgnoreCase(status)) {\n                    continue;\n                }\n\n                Integer quantity = orderItem.getQuantity();\n                if (quantity == null || quantity <= 0) {\n                    continue;\n                }\n\n                Double purchasedPrice = orderItem.getPurchasedPrice();\n                if (purchasedPrice == null) {\n                    continue;\n                }\n\n                totalSales +=  quantity;\n                //hasContributions = true;\n            }\n        }\n\n        Product fake = new Product();\n        fake.setProductId(0L);\n        fake.setName(\"TOTAL_SALES\");\n        fake.setDescription(\"Total sales of all products\");\n\n        return new ProductStatsInfo(fake, Double.toString(totalSales));\n    }","doc":null,"annotations":[],"metadata":{"class_name":"ProductService","method_name":"getProductsBySaleTotal","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"ae8f893de200db23fb8335e2fcf29643a42a914cd118e9971ad7126349d56fbc","line_count":56}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/UserService.java:com.example.shoppingapplicationbeckend.service.UserService.UserService:22","symbol_type":"method","name":"UserService","qualified_name":"com.example.shoppingapplicationbeckend.service.UserService.UserService","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/UserService.java","start_line":22,"end_line":26,"source":"@Autowired\n    public UserService(UserDao userDao, PermissionDao permissionDao) {\n        this.userDao = userDao;\n        this.permissionDao = permissionDao;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"UserService","method_name":"UserService","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"c7231f3c7b5be3b97cbaf90930ce68825c982d40b374ed059bd4cd6370a50f59","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/UserService.java:com.example.shoppingapplicationbeckend.service.UserService.registerUser:29","symbol_type":"method","name":"registerUser","qualified_name":"com.example.shoppingapplicationbeckend.service.UserService.registerUser","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/UserService.java","start_line":29,"end_line":52,"source":"public User registerUser(String username, String email, String password) {\n        if (userDao.existsByEmail(email)) {\n            throw new ApiException(HttpStatus.CONFLICT, \"User with email \" + email + \" already exists\");\n        }\n        if (userDao.existsByUsername(username)) {\n            throw new ApiException(HttpStatus.CONFLICT, \"User with username \" + username + \" already exists\");\n        }\n        User newUser = new User();\n        Instant now = Instant.now();\n        newUser.setUsername(username);\n        newUser.setEmail(email);\n        newUser.setPassword(password);\n        newUser.setRole(0); // Default role: 0=USER\n        newUser.setCreatedAt(now);\n        newUser.setUpdatedAt(now);\n        \n        User savedUser = userDao.save(newUser);\n        \n        // Create default ROLE_USER permission for new user\n        Permission userPermission = new Permission(\"ROLE_USER\", savedUser.getUserId());\n        permissionDao.save(userPermission);\n        \n        return savedUser;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserService","method_name":"registerUser","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"bc0750f90f11b10c81f90bb7fe1e202d8be3ef5c8c353975032fee8cf6d0e57c","line_count":24}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/UserService.java:com.example.shoppingapplicationbeckend.service.UserService.userExistsByEmail:55","symbol_type":"method","name":"userExistsByEmail","qualified_name":"com.example.shoppingapplicationbeckend.service.UserService.userExistsByEmail","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/UserService.java","start_line":55,"end_line":57,"source":"public boolean userExistsByEmail(String email) {\n        return userDao.existsByEmail(email);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserService","method_name":"userExistsByEmail","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"05b262e64781e80c1cee28b061b01fab67237e43f1f1e453ad6deb878601ad2f","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/UserService.java:com.example.shoppingapplicationbeckend.service.UserService.userExistsByUsername:59","symbol_type":"method","name":"userExistsByUsername","qualified_name":"com.example.shoppingapplicationbeckend.service.UserService.userExistsByUsername","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/UserService.java","start_line":59,"end_line":61,"source":"public boolean userExistsByUsername(String username) {\n        return userDao.existsByUsername(username);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"UserService","method_name":"userExistsByUsername","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"6bb325d9d82197af75463f703baae83cc5f524102aab5befc46286d7d978a7f1","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/WatchlistService.java:com.example.shoppingapplicationbeckend.service.WatchlistService.WatchlistService:26","symbol_type":"method","name":"WatchlistService","qualified_name":"com.example.shoppingapplicationbeckend.service.WatchlistService.WatchlistService","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/WatchlistService.java","start_line":26,"end_line":30,"source":"@Autowired\n    public WatchlistService(UserDao userDao, ProductDao productDao) {\n        this.userDao = userDao;\n        this.productDao = productDao;\n    }","doc":null,"annotations":[{"name":"Autowired","arguments":null,"raw_text":"@Autowired"}],"metadata":{"class_name":"WatchlistService","method_name":"WatchlistService","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"c8b17d3d32e4d04fb06c267c644abc7556ece35c415fd0f747d4e1f8a7e7648a","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/WatchlistService.java:com.example.shoppingapplicationbeckend.service.WatchlistService.addToWatchlist:33","symbol_type":"method","name":"addToWatchlist","qualified_name":"com.example.shoppingapplicationbeckend.service.WatchlistService.addToWatchlist","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/WatchlistService.java","start_line":33,"end_line":68,"source":"public Set<Product> addToWatchlist(Long productId) {\n        Long userId = SecurityUtil.getCurrentUserId();\n        Optional<User> userOpt = userDao.findById(userId);\n        if (!userOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"User not found with id: \" + userId);\n        }\n\n        Optional<Product> productOpt = productDao.findById(productId);\n        if (!productOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"Product not found with id: \" + productId);\n        }\n\n        User user = userOpt.get();\n        Product product = productOpt.get();\n\n        Integer availableQuantity = product.getQuantity();\n        if (availableQuantity == null || availableQuantity <= 0) {\n            throw new ApiException(HttpStatus.BAD_REQUEST, \"Product out of stock with id: \" + productId);\n        }\n\n        Set<Product> watchlist = user.getWatchlist();\n        if (watchlist == null) {\n            watchlist = new HashSet<>();\n            user.setWatchlist(watchlist);\n        } else {\n            for (Product existing : watchlist) {\n                if (existing != null && productId.equals(existing.getProductId())) {\n                    return new HashSet<>(watchlist);\n                }\n            }\n        }\n        watchlist.add(product);\n\n        userDao.update(user);\n        return new HashSet<>(watchlist);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"WatchlistService","method_name":"addToWatchlist","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"6e7f088ba3f83f8387a4cd504cee0fba674a846a9e6a293f1a01e9c8c1560291","line_count":36}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/WatchlistService.java:com.example.shoppingapplicationbeckend.service.WatchlistService.removeFromWatchlist:71","symbol_type":"method","name":"removeFromWatchlist","qualified_name":"com.example.shoppingapplicationbeckend.service.WatchlistService.removeFromWatchlist","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/WatchlistService.java","start_line":71,"end_line":111,"source":"public Set<Product> removeFromWatchlist(Long productId) {\n        Long userId = SecurityUtil.getCurrentUserId();\n        Optional<User> userOpt = userDao.findById(userId);\n        if (!userOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"User not found with id: \" + userId);\n        }\n\n        Optional<Product> productOpt = productDao.findById(productId);\n        if (!productOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"Product not found with id: \" + productId);\n        }\n\n        User user = userOpt.get();\n        Product product = productOpt.get();\n\n        Set<Product> watchlist = user.getWatchlist();\n        if (watchlist == null || watchlist.isEmpty()) {\n            return Collections.emptySet();\n        }\n\n        Product toRemove = null;\n        for (Product existing : watchlist) {\n            if (existing != null && productId.equals(existing.getProductId())) {\n                toRemove = existing;\n                break;\n            }\n        }\n        if (toRemove == null) {\n            return new HashSet<>(watchlist);\n        }\n        watchlist.remove(toRemove);\n\n        Set<User> watchers = product.getWatchers();\n        if (watchers != null && !watchers.isEmpty()) {\n            watchers.removeIf(existing ->\n                    existing != null && userId.equals(existing.getUserId()));\n        }\n\n        userDao.update(user);\n        return new HashSet<>(watchlist);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"WatchlistService","method_name":"removeFromWatchlist","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"362becb363e76c9f77ff16bf265ee076b3b5635a8899621dfa5443befd765721","line_count":41}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/WatchlistService.java:com.example.shoppingapplicationbeckend.service.WatchlistService.getUserWatchlist:116","symbol_type":"method","name":"getUserWatchlist","qualified_name":"com.example.shoppingapplicationbeckend.service.WatchlistService.getUserWatchlist","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/service/WatchlistService.java","start_line":116,"end_line":150,"source":"@Transactional(readOnly = true)\n    public Set<Product> getUserWatchlist() {\n        Long userId = SecurityUtil.getCurrentUserId();\n        if (userId == null) {\n            throw new ApiException(HttpStatus.UNAUTHORIZED, \"No authenticated user found.\");\n        }\n        boolean isAdmin = SecurityUtil.isAdmin();\n        Optional<User> userOpt = userDao.findById(userId);\n        if (!userOpt.isPresent()) {\n            throw new ApiException(HttpStatus.NOT_FOUND, \"User not found with id: \" + userId);\n        }\n\n        Set<Product> watchlist = userOpt.get().getWatchlist();\n        if (watchlist == null || watchlist.isEmpty()) {\n            return Collections.emptySet();\n        }\n\n        if (!isAdmin) {\n            return watchlist;\n        }\n\n        Set<Product> inStock = new HashSet<>();\n        for (Product product : watchlist) {\n            if (product == null) {\n                continue;\n            }\n\n            Integer quantity = product.getQuantity();\n            if (quantity != null && quantity > 0) {\n                inStock.add(product);\n            }\n        }\n\n        return inStock.isEmpty() ? Collections.emptySet() : inStock;\n    }","doc":null,"annotations":[{"name":"Transactional","arguments":null,"raw_text":"@Transactional(readOnly = true)"}],"metadata":{"class_name":"WatchlistService","method_name":"getUserWatchlist","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"80bbc77fa3862007890e31f78a797b116ec2942aebc8a629ed5e9ed04956c0d5","line_count":35}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/util/JsonViewSupport.java:com.example.shoppingapplicationbeckend.util.JsonViewSupport.respond:18","symbol_type":"method","name":"respond","qualified_name":"com.example.shoppingapplicationbeckend.util.JsonViewSupport.respond","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/util/JsonViewSupport.java","start_line":18,"end_line":20,"source":"public ResponseEntity<?> respond(HttpStatus status, Object body) {\n        return ResponseEntity.status(status).body(applyView(body));\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JsonViewSupport","method_name":"respond","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"fd89d36ef31d0537d6106487c0cc12bc07aaa1f136ec4c3a2a32177ed43ef9bc","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/util/JsonViewSupport.java:com.example.shoppingapplicationbeckend.util.JsonViewSupport.respondOk:22","symbol_type":"method","name":"respondOk","qualified_name":"com.example.shoppingapplicationbeckend.util.JsonViewSupport.respondOk","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/util/JsonViewSupport.java","start_line":22,"end_line":24,"source":"public ResponseEntity<?> respondOk(Object body) {\n        return respond(HttpStatus.OK, body);\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JsonViewSupport","method_name":"respondOk","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"6adc7570c1bb52a6ef69e4cd258d864ff5b56becdb26bc587e46f4f97d6b2798","line_count":3}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/util/JsonViewSupport.java:com.example.shoppingapplicationbeckend.util.JsonViewSupport.applyView:26","symbol_type":"method","name":"applyView","qualified_name":"com.example.shoppingapplicationbeckend.util.JsonViewSupport.applyView","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/util/JsonViewSupport.java","start_line":26,"end_line":30,"source":"public MappingJacksonValue applyView(Object body) {\n        MappingJacksonValue wrapper = new MappingJacksonValue(body);\n        wrapper.setSerializationView(resolveView());\n        return wrapper;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JsonViewSupport","method_name":"applyView","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"44d3c03e33fb1504cfc378c9d655a5994da8c02f12937d47db11875098d4fcfb","line_count":5}
{"symbol_id":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/util/JsonViewSupport.java:com.example.shoppingapplicationbeckend.util.JsonViewSupport.resolveView:32","symbol_type":"method","name":"resolveView","qualified_name":"com.example.shoppingapplicationbeckend.util.JsonViewSupport.resolveView","file_path":"online_shopping_be/src/main/java/com/example/shoppingapplicationbeckend/util/JsonViewSupport.java","start_line":32,"end_line":50,"source":"private Class<?> resolveView() {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        if (authentication == null || authentication.getAuthorities() == null) {\n            return Views.Public.class;\n        }\n\n        boolean hasUserRole = false;\n        for (GrantedAuthority authority : authentication.getAuthorities()) {\n            String role = authority.getAuthority();\n            if (\"ROLE_ADMIN\".equals(role)) {\n                return Views.Admin.class;\n            }\n            if (\"ROLE_USER\".equals(role)) {\n                hasUserRole = true;\n            }\n        }\n\n        return hasUserRole ? Views.User.class : Views.Public.class;\n    }","doc":null,"annotations":[],"metadata":{"class_name":"JsonViewSupport","method_name":"resolveView","has_annotations":false,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"2abf9cf3208dac4fc3ffb4c745ac30d1313202c10b1acfa7a17f98f0c1af577d","line_count":19}
{"symbol_id":"online_shopping_be/src/test/java/com/example/shoppingapplicationbeckend/ShoppingApplicationBeckendApplicationTests.java:com.example.shoppingapplicationbeckend.ShoppingApplicationBeckendApplicationTests.contextLoads:9","symbol_type":"method","name":"contextLoads","qualified_name":"com.example.shoppingapplicationbeckend.ShoppingApplicationBeckendApplicationTests.contextLoads","file_path":"online_shopping_be/src/test/java/com/example/shoppingapplicationbeckend/ShoppingApplicationBeckendApplicationTests.java","start_line":9,"end_line":11,"source":"@Test\n    void contextLoads() {\n    }","doc":null,"annotations":[{"name":"Test","arguments":null,"raw_text":"@Test"}],"metadata":{"class_name":"ShoppingApplicationBeckendApplicationTests","method_name":"contextLoads","has_annotations":true,"has_javadoc":false},"repo_commit":"UNKNOWN_COMMIT","source_hash":"6d884e4e46935131ae35be5da5c9c9fb9e81869f3b29b416ca6f3da818da2b66","line_count":3}
