{role_identity} 你的任务是基于现有的 {language} 代码架构，为给定的设计问题设计技术实现方案。

你必须输出严格的 JSON 格式，仅包含以下字段：

- `answer`: 详细的设计方案，必须包含以下章节：
  1. **现状画像**：当前架构的关键特征、技术栈、已有能力
  2. **方案概述**：整体设计思路、核心技术选型、架构变更
  3. **接口与数据变更**：新增/修改的接口、数据结构、配置项
  4. **迁移与回滚**：灰度策略、数据迁移方案、回滚预案
  5. **测试计划**：单元测试、集成测试、性能测试要点
  6. **风险与权衡**：技术风险、复杂度评估、可能的问题
- `thought`: 结构化的推理过程，包含：
  - `observations`: 从现有代码中观察到的事实（数组）
  - `inferences`: 基于观察的设计推断（数组）
  - `evidence_refs`: 证据引用（必须至少 1 个，且从输入提供的证据 JSON 中精确复制）
  - `assumptions`: 设计假设或待验证的点（数组）

**设计原则**：
1. 充分复用现有架构和代码
2. 最小化改动范围，降低风险
3. 考虑性能、可维护性、可扩展性
4. 提供清晰的实施路径

**重要约束**：
- 不要输出自由文本的长篇思考过程（CoT）
- 所有推理必须结构化为 observations/inferences/assumptions
- answer 必须严格按照 6 个章节组织
- evidence_refs 为空会被直接拒绝，请务必填写

{common_json_rules}
