你是一位资深的代码架构师和代码审查专家。你的任务是基于检索到的相关代码上下文，回答给定的业务问题。

## 问题

{question}

## 检索到的相关代码上下文（Top-K 方法）

{context}

## 可用的证据引用（evidence_refs）

以下是检索到的方法的精确引用信息，你的回答中的 evidence_refs 必须从这些中选择：

{available_evidence_refs}

{format_constraints}

## 常见错误和正确示例

{common_mistakes_examples}

## 输出要求

你必须输出一个严格的 TrainingSample JSON 对象，包含以下字段：

- `scenario`: 固定为 "qa_rule"
- `instruction`: 问题文本（与上面的问题完全一致）
- `context`: 相关代码上下文（直接使用上面提供的 context）
- `answer`: 详细的回答，必须包含：
  - 结论性陈述
  - 机制/规则说明（条列式）
  - 风险点或注意事项（条列式）
- `thought`: 结构化的推理过程，包含：
  - `observations`: 从代码中观察到的关键事实（数组，3-5条）
  - `inferences`: 基于观察的推断（数组，2-4条）
  - `evidence_refs`: 证据引用（数组，必须从上面的"可用证据引用"中选择，至少1个）
  - `assumptions`: 不确定的假设（数组，可为空）
- `repo_commit`: 仓库提交哈希（必须与输入完全一致：{repo_commit}）

## 关键约束

1. **evidence_refs 必须准确**: 只能使用上面"可用的证据引用"中列出的 symbol_id、file_path、start_line、end_line、source_hash
2. **不要捏造信息**: 如果代码上下文不足以回答问题，在 answer 中说明需要更多上下文
3. **基于证据推理**: 所有推断必须有代码依据，记录在 observations 中

## JSON 输出格式严格要求

1. ✅ 只输出纯 JSON 对象，直接以 {{ 开始，以 }} 结束
2. ❌ 不要添加任何前导文字或后缀文字
3. ❌ 不要使用 Markdown 代码块标记（```json 或 ```）
4. ❌ 不要添加注释
5. ✅ evidence_refs 必须从"可用的证据引用"中精确复制

## 示例输出

```json
{{
  "scenario": "qa_rule",
  "instruction": "该方法的事务边界如何定义？在什么情况下会回滚？",
  "context": "def create_user(...):\\n    # Database transaction logic\\n    ...",
  "answer": "该方法的事务处理机制如下：\\n\\n1. **事务范围**: 方法执行期间所有数据库操作都在同一事务内\\n2. **回滚条件**: 遇到异常时自动回滚\\n3. **提交时机**: 方法正常返回时提交事务\\n\\n注意事项：\\n- 需要确保数据库连接配置正确\\n- 事务隔离级别应根据业务需求设置",
  "thought": {{
    "observations": [
      "方法包含数据库操作",
      "方法内使用了save()等持久化方法",
      "没有显式的异常处理"
    ],
    "inferences": [
      "使用框架默认的事务管理策略",
      "异常会触发事务回滚"
    ],
    "evidence_refs": [
      {{
        "symbol_id": "example/service.py:ServiceClass.create_user:45",
        "file_path": "example/service.py",
        "start_line": 45,
        "end_line": 68,
        "source_hash": "abc123..."
      }}
    ],
    "assumptions": []
  }},
  "repo_commit": "UNKNOWN_COMMIT"
}}
```

现在请基于上面的问题和代码上下文生成回答：
