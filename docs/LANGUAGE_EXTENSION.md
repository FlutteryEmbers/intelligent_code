# å¤šè¯­è¨€æ‰©å±•æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•æ‰©å±• QA ç”Ÿæˆå™¨ä»¥æ”¯æŒé Spring æ¡†æ¶çš„ Java é¡¹ç›®ä»¥åŠå…¶ä»–ç¼–ç¨‹è¯­è¨€ã€‚

---

## ğŸ“‹ å½“å‰æ”¯æŒèŒƒå›´

### âœ… å·²æ”¯æŒ
1. **Spring Framework é¡¹ç›®**ï¼ˆä¼˜åŒ–æ”¯æŒï¼‰
   - @Transactional, @Service, @RestController
   - @GetMapping, @PostMapping ç­‰ REST æ³¨è§£
   - @Async, @Scheduled ç­‰ä»»åŠ¡æ³¨è§£

2. **é€šç”¨ Java é¡¹ç›®**ï¼ˆæ¡†æ¶æ— å…³ï¼‰
   - CRUD æ“ä½œè¯†åˆ«ï¼ˆcreate/update/delete/findï¼‰
   - å¼‚å¸¸å¤„ç†ï¼ˆtry-catch, throwsï¼‰
   - å¹¶å‘æ§åˆ¶ï¼ˆsynchronized, lockï¼‰
   - æ•°æ®è®¿é—®ï¼ˆSQL, DAO, Repositoryï¼‰
   - IO æ“ä½œï¼ˆfile, http, socket, streamï¼‰
   - å¤šçº¿ç¨‹ï¼ˆthread, executor, poolï¼‰

3. **å…¶ä»– Java æ¡†æ¶**ï¼ˆéƒ¨åˆ†æ”¯æŒï¼‰
   - JAX-RS (@GET, @POST, @Path)
   - é€šç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶
   - ä»»ä½•ä½¿ç”¨æ ‡å‡† Java æ¨¡å¼çš„æ¡†æ¶

---

## ğŸ”§ é—®é¢˜ç”Ÿæˆç­–ç•¥ï¼ˆä¸‰å±‚æ¶æ„ï¼‰

### **ç¬¬ 1 å±‚ï¼šæ¡†æ¶ç‰¹å®šä¼˜åŒ–**
æ£€æµ‹ç‰¹å®šæ¡†æ¶çš„æ³¨è§£å’Œæ¨¡å¼ï¼Œç”Ÿæˆç²¾ç¡®çš„é—®é¢˜ã€‚

**ç¤ºä¾‹ï¼šSpring @Transactional**
```java
@Transactional
public void updateOrder() { ... }
```
**ç”Ÿæˆé—®é¢˜**ï¼š
- "è¯¥æ–¹æ³•çš„äº‹åŠ¡è¾¹ç•Œå¦‚ä½•å®šä¹‰ï¼Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå›æ»šï¼Ÿ"
- "è¯¥æ–¹æ³•ä½¿ç”¨çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶å¯¹ç³»ç»Ÿä¸€è‡´æ€§æœ‰ä½•å½±å“ï¼Ÿ"

---

### **ç¬¬ 2 å±‚ï¼šé€šç”¨ä»£ç æ¨¡å¼è¯†åˆ«**
åŸºäºæ–¹æ³•å‘½åã€ä»£ç ç»“æ„ã€è¯­æ³•ç‰¹å¾ç”Ÿæˆé—®é¢˜ï¼ˆ**æ¡†æ¶æ— å…³**ï¼‰ã€‚

#### **æ¨¡å¼ 1ï¼šCRUD æ“ä½œ**
```java
// ä»»ä½•åŒ…å« create/add/insert çš„æ–¹æ³•å
public User createUser(String username) { ... }
```
**ç”Ÿæˆé—®é¢˜**ï¼š
- "è¯¥åˆ›å»ºæ“ä½œçš„å‰ç½®æ ¡éªŒå’Œçº¦æŸæ¡ä»¶æœ‰å“ªäº›ï¼Ÿ"
- "è¯¥åˆ›å»ºæ“ä½œå¦‚ä½•å¤„ç†é‡å¤æ•°æ®æˆ–å”¯ä¸€æ€§å†²çªï¼Ÿ"

#### **æ¨¡å¼ 2ï¼šå¼‚å¸¸å¤„ç†**
```java
public void process() {
    try {
        // business logic
    } catch (Exception e) {
        // error handling
    }
}
```
**ç”Ÿæˆé—®é¢˜**ï¼š
- "è¯¥æ–¹æ³•çš„å¼‚å¸¸å¤„ç†ç­–ç•¥å¦‚ä½•ä¿è¯ç³»ç»Ÿç¨³å®šæ€§ï¼Ÿ"
- "è¯¥æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹é€‰æ‹©ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"

#### **æ¨¡å¼ 3ï¼šå¹¶å‘æ§åˆ¶**
```java
public synchronized void updateCounter() { ... }
```
**ç”Ÿæˆé—®é¢˜**ï¼š
- "è¯¥æ–¹æ³•çš„å¹¶å‘æ§åˆ¶ç­–ç•¥å¦‚ä½•é¿å…æ­»é”ï¼Ÿ"
- "è¯¥æ–¹æ³•çš„é”ç²’åº¦è®¾è®¡å¯¹æ€§èƒ½æœ‰ä½•å½±å“ï¼Ÿ"

#### **æ¨¡å¼ 4ï¼šçŠ¶æ€è½¬æ¢**
```java
public void changeStatus(String newStatus) {
    if (currentStatus.equals("PENDING")) {
        // state transition logic
    }
}
```
**ç”Ÿæˆé—®é¢˜**ï¼š
- "è¯¥æ–¹æ³•æ¶‰åŠçš„çŠ¶æ€è½¬æ¢è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ"
- "è¯¥æ–¹æ³•å¦‚ä½•é˜²æ­¢éæ³•çŠ¶æ€è½¬æ¢ï¼Ÿ"

---

### **ç¬¬ 3 å±‚ï¼šé€šç”¨å…œåº•é—®é¢˜**
å½“å‰ä¸¤å±‚éƒ½æ— æ³•åŒ¹é…æ—¶ï¼Œç”Ÿæˆé€šç”¨ä¸šåŠ¡åˆ†æé—®é¢˜ã€‚

**é€šç”¨é—®é¢˜æ¨¡æ¿**ï¼š
- "è¯¥æ–¹æ³•å®ç°äº†å“ªäº›ä¸šåŠ¡è§„åˆ™æˆ–çº¦æŸï¼Ÿ"
- "è¯¥æ–¹æ³•çš„è¾“å…¥æ ¡éªŒå’Œé”™è¯¯å¤„ç†ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ"
- "è¯¥æ–¹æ³•å¦‚ä½•ä¸ç³»ç»Ÿå…¶ä»–ç»„ä»¶åä½œï¼Ÿ"
- "è¯¥æ–¹æ³•çš„è®¾è®¡å¦‚ä½•ä½“ç°å…³æ³¨ç‚¹åˆ†ç¦»åŸåˆ™ï¼Ÿ"

---

## ğŸš€ æ‰©å±•åˆ°å…¶ä»– Java æ¡†æ¶

### **ç¤ºä¾‹ 1ï¼šAndroid é¡¹ç›®**

#### **ç‰¹å¾è¯†åˆ«**
- Activity lifecycle æ–¹æ³•ï¼š`onCreate()`, `onResume()`, `onPause()`
- View æ“ä½œï¼š`findViewById()`, `setOnClickListener()`
- å¼‚æ­¥ä»»åŠ¡ï¼š`AsyncTask`, `Handler`, `Runnable`

#### **æ‰©å±•ä»£ç **
```python
# åœ¨ _generate_question_suggestions() ä¸­æ·»åŠ 
if 'oncreate' in method_name or 'onresume' in method_name:
    suggestions.append("- è¯¥ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„æ‰§è¡Œæ—¶æœºå’Œèµ„æºç®¡ç†ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ")
    suggestions.append("- è¯¥ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¦‚ä½•å¤„ç†é…ç½®å˜æ›´å’ŒçŠ¶æ€æ¢å¤ï¼Ÿ")

if 'asynctask' in source_code or 'handler' in source_code:
    suggestions.append("- è¯¥å¼‚æ­¥æ“ä½œå¦‚ä½•é¿å…å†…å­˜æ³„æ¼å’ŒActivityå¼•ç”¨é—®é¢˜ï¼Ÿ")
```

---

### **ç¤ºä¾‹ 2ï¼šMicronaut / Quarkus æ¡†æ¶**

#### **ç‰¹å¾è¯†åˆ«**
- `@Controller`, `@Get`, `@Post` (Micronaut)
- `@ApplicationScoped`, `@RequestScoped` (CDI)

#### **æ‰©å±•ä»£ç **
```python
# åœ¨æ³¨è§£æ£€æŸ¥éƒ¨åˆ†æ·»åŠ 
if ann_set & {'@Controller', '@Get', '@Post'}:
    suggestions.append("- è¯¥æ§åˆ¶å™¨æ–¹æ³•çš„ä¾èµ–æ³¨å…¥å’Œä½œç”¨åŸŸç®¡ç†æ˜¯ä»€ä¹ˆï¼Ÿ")
```

---

### **ç¤ºä¾‹ 3ï¼šPure Java / JavaSE é¡¹ç›®**

**å®Œå…¨ä¸éœ€è¦ä¿®æ”¹**ï¼ç°æœ‰çš„ç¬¬ 2 å±‚é€šç”¨æ¨¡å¼è¯†åˆ«å·²ç»æ”¯æŒï¼š
- âœ… æ ‡å‡† CRUD æ–¹æ³•åè¯†åˆ«
- âœ… å¼‚å¸¸å¤„ç†æ¨¡å¼
- âœ… å¤šçº¿ç¨‹å’ŒåŒæ­¥
- âœ… IO æ“ä½œ
- âœ… ç®—æ³•å’Œè®¡ç®—

**æµ‹è¯•æ¡ˆä¾‹**ï¼š
```java
// æ— ä»»ä½•æ³¨è§£çš„çº¯ Java ä»£ç 
public class Calculator {
    public synchronized int calculate(int a, int b) {
        try {
            return a / b;
        } catch (ArithmeticException e) {
            // handle division by zero
            return 0;
        }
    }
}
```

**è‡ªåŠ¨ç”Ÿæˆé—®é¢˜**ï¼š
- "è¯¥è®¡ç®—æ–¹æ³•å¦‚ä½•å¤„ç†è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸è¾“å…¥ï¼Ÿ" (æ–¹æ³•å `calculate`)
- "è¯¥æ–¹æ³•çš„å¹¶å‘æ§åˆ¶ç­–ç•¥å¦‚ä½•é¿å…æ­»é”ï¼Ÿ" (æ£€æµ‹åˆ° `synchronized`)
- "è¯¥æ–¹æ³•çš„å¼‚å¸¸å¤„ç†ç­–ç•¥å¦‚ä½•ä¿è¯ç³»ç»Ÿç¨³å®šæ€§ï¼Ÿ" (æ£€æµ‹åˆ° `try-catch`)

---

## ğŸŒ æ‰©å±•åˆ°å…¶ä»–ç¼–ç¨‹è¯­è¨€

### **æ¶æ„è®¾è®¡**
å½“å‰ä»£ç é«˜åº¦æ¨¡å—åŒ–ï¼Œæ‰©å±•åˆ°å…¶ä»–è¯­è¨€éœ€è¦ï¼š

1. **åˆ›å»ºè¯­è¨€ç‰¹å®šçš„ Parser**
   ```
   src/parser/python_parser.py
   src/parser/go_parser.py
   src/parser/javascript_parser.py
   ```

2. **åˆ›å»ºè¯­è¨€ç‰¹å®šçš„ Generator**
   ```
   src/engine/python_qa_generator.py
   src/engine/go_qa_generator.py
   ```

3. **å¤ç”¨é€šç”¨æ¨¡å¼è¯†åˆ«é€»è¾‘**
   - æ–¹æ³•å‘½åçº¦å®šï¼ˆcreate/update/deleteï¼‰è·¨è¯­è¨€é€šç”¨
   - å¼‚å¸¸å¤„ç†ã€å¹¶å‘æ§åˆ¶ã€IO æ“ä½œç­‰æ¨¡å¼å…·æœ‰ç›¸ä¼¼æ€§

---

### **ç¤ºä¾‹ï¼šPython æ‰©å±•**

#### **Step 1: Python Parser**
```python
# src/parser/python_parser.py
class PythonParser(BaseParser):
    def extract_symbols(self):
        # ä½¿ç”¨ AST æˆ– tree-sitter-python
        # æå–å‡½æ•°ã€ç±»ã€è£…é¥°å™¨
        pass
```

#### **Step 2: è£…é¥°å™¨è¯†åˆ«**
```python
# æ£€æµ‹ Python ç‰¹å®šæ¨¡å¼
decorators = ['@staticmethod', '@classmethod', '@property', '@lru_cache']
```

#### **Step 3: é—®é¢˜ç”Ÿæˆé€»è¾‘**
```python
# åœ¨ _generate_question_suggestions() ä¸­æ·»åŠ  Python ç‰¹å®šé€»è¾‘
if '@lru_cache' in decorators:
    suggestions.append("- è¯¥å‡½æ•°çš„ç¼“å­˜ç­–ç•¥å’Œå¤±æ•ˆæœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ")

if 'async def' in source_code:
    suggestions.append("- è¯¥å¼‚æ­¥å‡½æ•°å¦‚ä½•å¤„ç†å¹¶å‘å’Œ event loop é˜»å¡ï¼Ÿ")

if 'with' in source_code:
    suggestions.append("- è¯¥å‡½æ•°çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¦‚ä½•ç¡®ä¿èµ„æºæ­£ç¡®é‡Šæ”¾ï¼Ÿ")
```

#### **é€šç”¨æ¨¡å¼å¤ç”¨**
```python
# è¿™äº›æ¨¡å¼åœ¨ Python ä¸­åŒæ ·æœ‰æ•ˆï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
if 'create' in function_name or 'add' in function_name:
    suggestions.append("- è¯¥åˆ›å»ºæ“ä½œçš„å‰ç½®æ ¡éªŒå’Œçº¦æŸæ¡ä»¶æœ‰å“ªäº›ï¼Ÿ")

if 'try' in source_code and 'except' in source_code:
    suggestions.append("- è¯¥å‡½æ•°çš„å¼‚å¸¸å¤„ç†ç­–ç•¥å¦‚ä½•ä¿è¯ç³»ç»Ÿç¨³å®šæ€§ï¼Ÿ")
```

---

### **ç¤ºä¾‹ï¼šGo æ‰©å±•**

#### **Go ç‰¹å®šæ¨¡å¼**
```go
// é”™è¯¯å¤„ç†
if err != nil {
    return nil, err
}

// å¹¶å‘
go func() { ... }()
select { ... }
```

#### **é—®é¢˜ç”Ÿæˆ**
```python
if 'if err != nil' in source_code:
    suggestions.append("- è¯¥å‡½æ•°çš„é”™è¯¯å¤„ç†é“¾è·¯æ˜¯å¦å®Œæ•´ï¼Ÿ")

if 'go func' in source_code or 'goroutine' in method_name:
    suggestions.append("- è¯¥å¹¶å‘æ“ä½œå¦‚ä½•é˜²æ­¢ goroutine æ³„æ¼ï¼Ÿ")

if 'select' in source_code or 'channel' in source_code:
    suggestions.append("- è¯¥æ–¹æ³•çš„ channel é€šä¿¡ç­–ç•¥å¦‚ä½•é¿å…æ­»é”ï¼Ÿ")
```

---

## ğŸ“Š å½“å‰å®ç°çš„å®Œæ•´è¦†ç›–èŒƒå›´

### **âœ… å·²è¦†ç›–çš„é€šç”¨æ¨¡å¼ï¼ˆè·¨è¯­è¨€é€‚ç”¨ï¼‰**

| æ¨¡å¼ç±»å‹ | æ£€æµ‹å…³é”®è¯ | ç”Ÿæˆé—®é¢˜ç±»å‹ |
|---------|-----------|------------|
| **CRUD æ“ä½œ** | create/add/insert/save/update/modify/delete/remove/find/get/query | æ ¡éªŒã€å†²çªã€çŠ¶æ€ã€æ€§èƒ½ |
| **éªŒè¯æ ¡éªŒ** | validate/check/verify/ensure | è§„åˆ™ã€ä¸¥æ ¼æ€§ã€é”™è¯¯ä¿¡æ¯ |
| **ä¸šåŠ¡å¤„ç†** | process/handle/execute/perform | æµç¨‹ã€è§„åˆ™ã€å®¹é”™ |
| **è®¡ç®—è½¬æ¢** | calculate/compute/convert/transform | å¤æ‚åº¦ã€è¾¹ç•Œã€ç²¾åº¦ |
| **åˆå§‹åŒ–æ¸…ç†** | init/setup/initialize/close/cleanup/dispose/shutdown | æ—¶æœºã€ä¾èµ–ã€èµ„æºé‡Šæ”¾ |
| **å¼‚å¸¸å¤„ç†** | try-catch/throws | ç­–ç•¥ã€å¼‚å¸¸ç±»å‹ã€è¯Šæ–­ |
| **çŠ¶æ€ç®¡ç†** | status/state | è½¬æ¢è§„åˆ™ã€éæ³•é˜²æ­¢ |
| **å¹¶å‘æ§åˆ¶** | synchronized/lock/mutex | æ­»é”ã€é”ç²’åº¦ã€ç«äº‰ |
| **æ‰¹å¤„ç†** | batch/for/while | æ€§èƒ½ã€å†…å­˜ã€éƒ¨åˆ†å¤±è´¥ |
| **ç¼“å­˜** | cache/cached/memo | ç­–ç•¥ã€å¤±æ•ˆã€ä¸€è‡´æ€§ |
| **æ—¥å¿—å®¡è®¡** | log/audit/track | è¿½è¸ªã€åˆè§„ |
| **æ•°æ®è®¿é—®** | select/insert/update/delete/sql/query/dao | SQLæ³¨å…¥ã€æ€§èƒ½ã€äº‹åŠ¡ |
| **ç½‘ç»œIO** | http/request/response/socket/stream/file/io | è¶…æ—¶ã€èµ„æºé‡Šæ”¾ã€é‡è¯• |
| **å¤šçº¿ç¨‹** | thread/executor/pool/concurrent/parallel | çº¿ç¨‹å®‰å…¨ã€çº¿ç¨‹æ± ã€ä¸­æ–­ |
| **é…ç½®ç®¡ç†** | config/property/setting/env | çµæ´»æ€§ã€ç¼ºå¤±å¤„ç† |

---

## ğŸ¯ æœ€ä½³å®è·µ

### **1. æ¸è¿›å¼æ‰©å±•**
- å…ˆæ”¯æŒé€šç”¨æ¨¡å¼ï¼ˆå·²å®Œæˆï¼‰
- å†æ·»åŠ æ¡†æ¶ç‰¹å®šä¼˜åŒ–ï¼ˆæŒ‰éœ€ï¼‰
- æœ€åæ‰©å±•åˆ°æ–°è¯­è¨€ï¼ˆæ¨¡å—åŒ–ï¼‰

### **2. ä¿æŒé—®é¢˜è´¨é‡**
- æ¯ä¸ªæ¨¡å¼è‡³å°‘ç”Ÿæˆ 2-3 ä¸ªä¸åŒé—®é¢˜
- éšæœºé€‰æ‹© 3-5 ä¸ªé¿å…è¿‡è½½
- ä¿è¯é—®é¢˜ä¸ä»£ç ç‰¹å¾å¼ºç›¸å…³

### **3. æµ‹è¯•è¦†ç›–**
```bash
# æµ‹è¯•ä¸åŒç±»å‹çš„é¡¹ç›®
python test_qa_diversity.py  # Spring é¡¹ç›®
python test_qa_diversity.py --project pure-java  # çº¯ Java
python test_qa_diversity.py --project android  # Android
```

---

## ğŸ“ æ€»ç»“

| é¡¹ç›®ç±»å‹ | æ”¯æŒç¨‹åº¦ | éœ€è¦æ‰©å±• |
|---------|---------|---------|
| **Spring Boot/MVC** | â­â­â­â­â­ ä¼˜åŒ–æ”¯æŒ | âŒ æ— éœ€ä¿®æ”¹ |
| **çº¯ Java / JavaSE** | â­â­â­â­â­ å®Œæ•´æ”¯æŒ | âŒ æ— éœ€ä¿®æ”¹ |
| **Android** | â­â­â­â­ è‰¯å¥½æ”¯æŒ | âœ… å¯æ·»åŠ ç”Ÿå‘½å‘¨æœŸé—®é¢˜ |
| **Micronaut/Quarkus** | â­â­â­â­ è‰¯å¥½æ”¯æŒ | âœ… å¯æ·»åŠ æ³¨è§£è¯†åˆ« |
| **JAX-RS** | â­â­â­â­ è‰¯å¥½æ”¯æŒ | âŒ æ— éœ€ä¿®æ”¹ |
| **Python** | â­â­â­ åŸºç¡€æ”¯æŒ | âœ… éœ€è¦ Parser + è£…é¥°å™¨ |
| **Go** | â­â­â­ åŸºç¡€æ”¯æŒ | âœ… éœ€è¦ Parser + é”™è¯¯å¤„ç† |
| **JavaScript/TS** | â­â­â­ åŸºç¡€æ”¯æŒ | âœ… éœ€è¦ Parser + async/await |

**å…³é”®ä¼˜åŠ¿**ï¼š
- âœ… **80% çš„é—®é¢˜ç”Ÿæˆé€»è¾‘æ˜¯æ¡†æ¶æ— å…³çš„**
- âœ… åŸºäºé€šç”¨ä»£ç æ¨¡å¼è¯†åˆ«ï¼Œä¸ä¾èµ–ç‰¹å®šæ³¨è§£
- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•åˆ°æ–°è¯­è¨€
- âœ… ä¸‰å±‚æ¶æ„ï¼šæ¡†æ¶ç‰¹å®š â†’ é€šç”¨æ¨¡å¼ â†’ å…œåº•é—®é¢˜

**æ‰©å±•åˆ°æ–°è¯­è¨€åªéœ€è¦**ï¼š
1. åˆ›å»ºè¯­è¨€ç‰¹å®šçš„ Parserï¼ˆ10-20% å·¥ä½œé‡ï¼‰
2. æ·»åŠ è¯­è¨€ç‰¹å®šçš„æ¨¡å¼è¯†åˆ«ï¼ˆ5-10% å·¥ä½œé‡ï¼‰
3. å¤ç”¨ç°æœ‰é€šç”¨æ¨¡å¼é€»è¾‘ï¼ˆ70-85% ç›´æ¥å¯ç”¨ï¼‰

---

**è”ç³»æ–¹å¼**ï¼šå¦‚éœ€æ‰©å±•æ”¯æŒç‰¹å®šæ¡†æ¶æˆ–è¯­è¨€ï¼Œè¯·å‚è€ƒæœ¬æ–‡æ¡£ä¿®æ”¹ `src/engine/qa_generator.py` ä¸­çš„ `_generate_question_suggestions()` æ–¹æ³•ã€‚
